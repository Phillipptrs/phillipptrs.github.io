<!DOCTYPE html>
<html lang="en">
  <!-- MIT license | Copyright Dean Attali 2016 -->
  
<!-- Mirrored from deanattali.com/2015/05/31/shinyjs-extend/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Nov 2018 02:20:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  
  <title>New shinyjs version: Useful tools for any Shiny app developer + easily call JavaScript functions as R code</title>
  

  <meta name="author" content="Dean Attali" />
  
  
  <meta name="description" content="About a month ago I made an announcement about the initial release of shinyjs. After some feedback, a few feature requests, and numerous hours of work, I’m excited to say that a new version of shinyjs v0.0.6.2 was made available on CRAN this week. The package’s main objective is to...">
  
  
  <meta name="keywords" content="rstats,r,r shiny,shiny apps,r shiny apps,shiny developer,r shiny developer,shiny consultant,dashboards r,interactive dashboards">

  <link rel="alternate" type="application/rss+xml" title="Dean Attali - R-Shiny developer and consultant with a MSc in Bioinformatics and a Bachelor of Computer Science. Previously a software engineer at Google, IBM, and Wish.com." href="../../../../feed.xml" />

  
    
      <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    
      
  
  
    
      <link rel="stylesheet" href="../../../../css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="../../../../css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="../../../../css/main.css" />
    
    
  
  
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  

  
  
  <!-- Facebook OpenGraph tags -->
  
  <meta property="og:title" content="New shinyjs version: Useful tools for any Shiny app developer + easily call JavaScript functions as R code" />
  
  
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="index.html" />
  <link rel="canonical" href="index.html" />
  
  
  
  <meta property="og:image" content="../../../../img/deanimg.jpg" />
  

  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@daattali" />
  <meta name="twitter:creator" content="@daattali" />
  <meta name="twitter:title" content="New shinyjs version: Useful tools for any Shiny app developer + easily call JavaScript functions as R code" />
  <meta name="twitter:description" content="About a month ago I made an announcement about the initial release of shinyjs. After some feedback, a few feature requests, and numerous hours of work, I’m excited to say that a new version of shinyjs v0.0.6.2 was made available on CRAN this week. The package’s main objective is to..." />
  
  <meta name="twitter:image" content="../../../../img/deanimg.jpg" />
    
  
</head>


  <body>
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom ">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../../index.html">Dean Attali</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            
            





<a href="../../../../index.html">Blog</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../../../shiny/index.html">Shiny</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../../../projects/index.html">Projects</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../../../aboutme/index.html">About Me / Contact</a>

          </li>
        
        
		
		
		<li>
		  <a href="../../../../search/index.html" class="nav-search-link" title="Search">
		    <span class="fa fa-search nav-search-icon"></span>
			<span class="nav-search-text">Search</span>
		  </a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="../../../../index.html">
	      <img class="avatar-img" src="../../../../img/deanimg.jpg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>New shinyjs version: Useful tools for any Shiny app developer + easily call JavaScript functions as R code</h1>
		  
		  
		  
		    <span class="post-meta">
                      Posted on May 31, 2015
                      
                        | Last updated December 23, 2016
                       
                    </span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      
  <div id="datacamp-course-section">
    <strong>Want to improve your Shiny skills?</strong><br/>
    Try my new interactive online video course: <strong>Shiny Case Studies</strong><br/>
    <a class="btn btn-primary btn-lg" href="https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny-case-studies" target="_blank">
      Try Course! &nbsp;&raquo;
    </a>
  </div>



      
        
        
        
      
        <div id="header-gh-btns">
          
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=daattali&amp;repo=shinyjs&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=daattali&amp;repo=shinyjs&amp;type=watch&amp;v=2&amp;count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
            
              
                  <iframe src="https://ghbtns.com/github-btn.html?user=daattali&amp;type=follow&amp;count=true" frameborder="0" scrolling="0" width="220px" height="20px"></iframe>
              
            
          
        </div>
      
     
      <article role="main" class="blog-post">
        
  
    <div id="deancarbonads">
      <script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYIL5Q7&amp;placement=deanattalicom" id="_carbonads_js"></script>
    </div>
  


      	<p>About a month ago I made <a href="../../../04/23/shinyjs-r-package/index.html">an announcement</a> about the initial release of <code class="highlighter-rouge">shinyjs</code>. After some feedback, a few feature requests, and numerous hours of work, I’m excited to say that a new version of <code class="highlighter-rouge">shinyjs</code> v0.0.6.2 was made available on CRAN this week. The package’s main objective is to make shiny app development better and easier by allowing you to perform many useful functions with simple R code that would normally require JavaScript coding. Some of the features include hiding/showing elements, enabling/disabling inputs, resetting an input to its original value, and many others.</p>

<h1 id="important-note">Important note</h1>

<p><strong>The package has improved a lot since writing this post. I highly recommend you stop reading this page and instead go the <a href="../../../../shinyjs/index.html">shinyjs website</a>.</strong></p>

<div style="text-align:center;">
<a style="text-decoration: none;" class="btn btn-success btn-lg" href="../../../../shinyjs/index.html">shinyjs website</a>
</div>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
  <li><a href="#availability">Availability</a></li>
  <li><a href="#overview">Quick overview of new features</a></li>
  <li><a href="#new-features">Major new features</a>
    <ul>
      <li><a href="#reset"><code class="highlighter-rouge">reset</code> - allows inputs to be reset to their original value</a></li>
      <li><a href="#extendshinyjs"><code class="highlighter-rouge">extendshinyjs</code> - allows you to easily call your own JavaScript functions from R</a></li>
    </ul>
  </li>
  <li><a href="#improvements-features">Major improvements</a>
    <ul>
      <li><a href="#disable-all">Enabling/disabling works on all inputs</a></li>
      <li><a href="#toggle-condition">Use a <code class="highlighter-rouge">condition</code> in <code class="highlighter-rouge">toggle</code> functions</a></li>
    </ul>
  </li>
  <li><a href="#extra-features">Extra features on GitHub but not yet on CRAN</a>
    <ul>
      <li><a href="#hidden"><code class="highlighter-rouge">hidden</code> now accepts multiple tags</a></li>
      <li><a href="#visibility-selector">Visibility functions can be run on any selector</a></li>
      <li><a href="#visibility-delay">Visibility functions can be delayed</a></li>
    </ul>
  </li>
  <li><a href="#feedback">Feedback + suggestions</a></li>
</ul>

<h2 id="availability">Availability</h2>

<p><code class="highlighter-rouge">shinyjs</code> is available through both <a href="http://cran.r-project.org/web/packages/shinyjs/">CRAN</a>
(<code class="highlighter-rouge">install.packages("shinyjs")</code>) and <a href="https://github.com/daattali/shinyjs">GitHub</a>
(<code class="highlighter-rouge">devtools::install_github("daattali/shinyjs")</code>). Use the GitHub version to get the latest version with the newest features.</p>

<h2 id="overview">Quick overview of new features</h2>

<p>This post will only discuss new features in <code class="highlighter-rouge">shinyjs</code>. You can find out more about the package <a href="../../../04/23/shinyjs-r-package/index.html">in the initial post</a> or <a href="https://github.com/daattali/shinyjs#readme">in the package README on GitHub</a>. Remember that in order to use any function, you need to add a call to <code class="highlighter-rouge">useShinyjs()</code> in the shiny app’s UI.</p>

<h4 id="two-major-new-features">Two major new features:</h4>

<ul>
  <li><code class="highlighter-rouge">reset</code> function allows inputs to be reset to their original value</li>
  <li><code class="highlighter-rouge">extendShinyjs</code> allows you to add your own JavaScript functions and easily call them from R as regular R code</li>
</ul>

<h4 id="two-major-improvements">Two major improvements:</h4>

<ul>
  <li>Enabling and disabling of input widgets now works on <strong>all</strong> types of shiny inputs (many people asked how to disable a slider/select input/date range/etc, and <code class="highlighter-rouge">shinyjs</code> now handles all of them)</li>
  <li>The <code class="highlighter-rouge">toggle</code> functions gained an additional <code class="highlighter-rouge">condition</code> argument, which can be used to show/hide or enable/disable an element based on a condition. For example, instead of writing code such as <code class="highlighter-rouge">if (test) enable(id) else disable(id)</code>, you can simply write <code class="highlighter-rouge">toggleState(id, test)</code></li>
</ul>

<h4 id="three-new-features-available-on-the-github-version-but-not-yet-on-cran">Three new features available on the GitHub version but not yet on CRAN:</h4>

<ul>
  <li><code class="highlighter-rouge">hidden</code> (used to initialize a shiny tag as hidden) can now accept any number of tags or a tagList rather than just a single tag</li>
  <li><code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">show</code>/<code class="highlighter-rouge">toggle</code> can be run on any JQuery selector, not only on a single ID, so that you can hide multiple elements simultaneously</li>
  <li><code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">show</code>/<code class="highlighter-rouge">toggle</code> have a new arugment <code class="highlighter-rouge">delay</code> which can be used to perform the action later rather than immediately. This can be useful if you want to show a message and have it disappear after a few seconds</li>
</ul>

<h2 id="new-features">Two major new features</h2>

<p>There were two major features that I wanted to include in the CRAN release.</p>

<h3 id="reset"><code class="highlighter-rouge">reset</code> -  allows inputs to be reset to their original value</h3>

<p>Being able to reset the value of an input has been a frequently asked question on StackOverflow and the shiny Google Group, but a general solution was never available.  Now with <code class="highlighter-rouge">shinyjs</code> it’s possible and very easy: if you have an input with id <code class="highlighter-rouge">name</code> and you want to reset it to its original value, simply call <code class="highlighter-rouge">reset("name")</code>. It doesn’t matter what type of input it is - <code class="highlighter-rouge">reset</code> works with all shiny inputs.</p>

<p>The <code class="highlighter-rouge">reset</code> function only takes one arugment, an HTML id, and resets all inputs inside of that element. This makes <code class="highlighter-rouge">reset</code> very flexible because you can either give it a single input widget to reset, or a form that contains many inputs and reset them all. Note that <code class="highlighter-rouge">reset</code> can only work on inputs that are generated from the app’s ui and it will not work for inputs generated dynamically using <code class="highlighter-rouge">uiOutput</code>/<code class="highlighter-rouge">renderUI</code>.</p>

<p>Here is a simple demo of reset in action</p>

<p><a href="../../../../img/blog/shinyjs-improvements/reset-demo.gif"><img src="../../../../img/blog/shinyjs-improvements/reset-demo.gif" alt="Reset demo" /></a></p>

<h3 id="extendshinyjs"><code class="highlighter-rouge">extendShinyjs</code> - allows you to easily call your own JavaScript functions from R</h3>

<p>The main idea behind <code class="highlighter-rouge">shinyjs</code> when I started working on it was to make it extremely easy to call JavaScript functions that I used commonly from R. Now whenever I want to add a new function to <code class="highlighter-rouge">shinyjs</code> (such as the <code class="highlighter-rouge">reset</code> function), all I have to do is write the JavaScript function, and the integration between shiny and JavaScript happens seamlessly thanks to <code class="highlighter-rouge">shinyjs</code>.  My main goal after the initial release was to also allow anyone else to use the same smooth R –&gt; JS workflow, so that anyone can add a JavaScript function and call it from R easily. With the <code class="highlighter-rouge">extendShinyjs</code> function, that is now possible.</p>

<h4 id="very-simple-example">Very simple example</h4>

<p>Using <code class="highlighter-rouge">extendShinyjs</code> is very simple and makes defining and calling JavaScript functions painless. Here is a very basic example of using <code class="highlighter-rouge">extendShinyjs</code> to define a (fairly useless) function that changes the colour of the page.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">shinyjs</span><span class="p">)</span><span class="w">

</span><span class="n">jsCode</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"shinyjs.pageCol = function(params){$('body').css('background', params);}"</span><span class="w">

</span><span class="n">runApp</span><span class="p">(</span><span class="n">shinyApp</span><span class="p">(</span><span class="w">
  </span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
    </span><span class="n">useShinyjs</span><span class="p">(),</span><span class="w">
    </span><span class="n">extendShinyjs</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsCode</span><span class="p">),</span><span class="w">
    </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"col"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour:"</span><span class="p">,</span><span class="w">
                </span><span class="nf">c</span><span class="p">(</span><span class="s2">"white"</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">))</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="n">output</span><span class="p">,</span><span class="n">session</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">observeEvent</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">col</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">js</span><span class="o">$</span><span class="n">pageCol</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">col</span><span class="p">)</span><span class="w">
    </span><span class="p">})</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Running the code above produces this shiny app:</p>

<p><a href="../../../../img/blog/shinyjs-improvements/extendshinyjs-demo.gif"><img src="../../../../img/blog/shinyjs-improvements/extendshinyjs-demo.gif" alt="Extendshinyjs demo" /></a></p>

<p>See how easy that was? All I had to do was make the JavaScript function <code class="highlighter-rouge">shinyjs.pageCol</code>, pass the JavaScript code as an argument to <code class="highlighter-rouge">extendShinyjs</code>, and then I can call <code class="highlighter-rouge">js$pageCol()</code>.  That’s the basic idea: any JavaScript function named <code class="highlighter-rouge">shinyjs.foo</code> will be available to call as <code class="highlighter-rouge">js$foo()</code>. You can either pass the JS code as a string to the <code class="highlighter-rouge">text</code> argument, or place the JS code in a separate JavaScript file and use the <code class="highlighter-rouge">script</code> argument to specify where the code can be found. Using a separate file is generally prefered over writing the code inline, but in these examples I will use the <code class="highlighter-rouge">text</code> argument to keep it simple.</p>

<p>Note: in order to use <code class="highlighter-rouge">extendShinyjs</code>, you must have the <code class="highlighter-rouge">V8</code> package installed. You can install it with <code class="highlighter-rouge">install.packages("V8")</code>.</p>

<h4 id="passing-arguments-from-r-to-javascript">Passing arguments from R to JavaScript</h4>

<p>Any <code class="highlighter-rouge">shinyjs</code> function that is called will pass a single array-like parameter to its corresponding JavaScript function. If the function in R was called with unnamed arguments, then it will pass an Array of the arguments; if the R arguments are named then it will pass an Object with key-value pairs. For example, calling <code class="highlighter-rouge">js$foo("bar", 5)</code> in R will call <code class="highlighter-rouge">shinyjs.foo(["bar", 5])</code> in JS, while calling <code class="highlighter-rouge">js$foo(num = 5, id = "bar")</code> in R will call <code class="highlighter-rouge">shinyjs.foo({num : 5, id : "bar"})</code> in JS. This means the <code class="highlighter-rouge">shinyjs.foo</code> function needs to be able to deal with both types of parameters.</p>

<p>To assist in normalizing the parameters, <code class="highlighter-rouge">shinyjs</code> provides a <code class="highlighter-rouge">shinyjs.getParams()</code> function which serves two purposes. First of all, it ensures that all arguments are named (even if the R function was called without names). Secondly, it allows you to define default values for arguments. Here is an example of a JS function that changes the background colour of an element and uses <code class="highlighter-rouge">shinyjs.getParams()</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">shinyjs</span><span class="p">.</span><span class="nx">backgroundCol</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">defaultParams</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span> <span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="na">col</span> <span class="p">:</span> <span class="s2">"red"</span>
  <span class="p">};</span>
  <span class="nx">params</span> <span class="o">=</span> <span class="nx">shinyjs</span><span class="p">.</span><span class="nx">getParams</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="nx">defaultParams</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#"</span> <span class="o">+</span> <span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="nx">el</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">col</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note the <code class="highlighter-rouge">defaultParams</code> that we defined and the call to <code class="highlighter-rouge">shinyjs.getParams</code>. It ensures that calling <code class="highlighter-rouge">js$backgroundCol("test", "blue")</code> and <code class="highlighter-rouge">js$backgroundCol(id = "test", col = "blue")</code> and <code class="highlighter-rouge">js$backgroundCol(col = "blue", id = "test")</code> are all equivalent, and that if the colour parameter is not provided then “red” will be the default.  All the functions provided in <code class="highlighter-rouge">shinyjs</code> make use of <code class="highlighter-rouge">shinyjs.getParams</code>, and it is highly recommended to always use it in your functions as well. Notice that the order of the arguments in <code class="highlighter-rouge">defaultParams</code> in the JavaScript function matches the order of the arguments when calling the function in R with unnamed arguments. This means that <code class="highlighter-rouge">js$backgroundCol("blue", "test")</code> will not work because the arguments are unnamed and the JS function expects the id to come before the colour.</p>

<p>For completeness, here is the code for a shiny app that uses the above function (it’s not a very practical example, but it’s great for showing how to use <code class="highlighter-rouge">extendShinyjs</code> with parameters):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">shinyjs</span><span class="p">)</span><span class="w">

</span><span class="n">jsCode</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'
shinyjs.backgroundCol = function(params) {
  var defaultParams = {
    id : null,
    col : "red"
  };
  params = shinyjs.getParams(params, defaultParams);

  var el = $("#" + params.id);
  el.css("background-color", params.col);
}'</span><span class="w">

</span><span class="n">runApp</span><span class="p">(</span><span class="n">shinyApp</span><span class="p">(</span><span class="w">
  </span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
    </span><span class="n">useShinyjs</span><span class="p">(),</span><span class="w">
    </span><span class="n">extendShinyjs</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jsCode</span><span class="p">),</span><span class="w">
    </span><span class="n">p</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"My name is Dean"</span><span class="p">),</span><span class="w">
    </span><span class="n">p</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"sport"</span><span class="p">,</span><span class="w"> </span><span class="s2">"I like soccer"</span><span class="p">),</span><span class="w">
    </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"col"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour:"</span><span class="p">,</span><span class="w">
                </span><span class="nf">c</span><span class="p">(</span><span class="s2">"white"</span><span class="p">,</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">)),</span><span class="w">    
    </span><span class="n">textInput</span><span class="p">(</span><span class="s2">"selector"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Element"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">),</span><span class="w">
    </span><span class="n">actionButton</span><span class="p">(</span><span class="s2">"btn"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Go"</span><span class="p">)</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="n">output</span><span class="p">,</span><span class="n">session</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">observeEvent</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">btn</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">js</span><span class="o">$</span><span class="n">backgroundCol</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">selector</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">col</span><span class="p">)</span><span class="w">
    </span><span class="p">})</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>And the resulting app:</p>

<p><a href="../../../../img/blog/shinyjs-improvements/extendshinyjs-params.gif"><img src="../../../../img/blog/shinyjs-improvements/extendshinyjs-params.gif" alt="Extendshinyjs params demo" /></a></p>

<p>Note that I chose to define the JS code as a string for illustration purposes, but in reality I would prefer to place the code in a separate file and use the <code class="highlighter-rouge">script</code> argument instead of <code class="highlighter-rouge">text</code>.</p>

<h2 id="improvements-features">Two major improvements</h2>

<p>Among the many small improvements made, there are two that will be the most useful.</p>

<h3 id="disable-all">Enabling/disabling works on all inputs</h3>

<p>The initial release of <code class="highlighter-rouge">shinyjs</code> had a <code class="highlighter-rouge">disable</code>/<code class="highlighter-rouge">enable</code> function which worked on the major input types that I was commonly using, but not all. Several people noticed that various inputs could not be disabled, so I made sure to fix all of them in the next version.  The reasons behind why not all inputs were easy to disable are very technical so I won’t go into them.  Now calling <code class="highlighter-rouge">disable(id)</code> or <code class="highlighter-rouge">enable(id)</code> will work on any type of shiny input.</p>

<h3 id="toggle-condition">Use a <code class="highlighter-rouge">condition</code> in <code class="highlighter-rouge">toggle</code> functions</h3>

<p>I’ve noticed that some users of <code class="highlighter-rouge">shinyjs</code> had to often write code such as <code class="highlighter-rouge">if (test) enable(id) else disable(id)</code>. This seemed inefficient and verbose, especially since there was already a <code class="highlighter-rouge">toggleState</code> function that enables disabled elements and vice versa. The <code class="highlighter-rouge">toggleState</code> function now has a new <code class="highlighter-rouge">condition</code> parameter to address exactly this problem. The code above can now be rewritten as <code class="highlighter-rouge">toggleState(id, test)</code>.</p>

<p>Similarly, code that previously used <code class="highlighter-rouge">if (test) show(id) else hide(id)</code> can now use <code class="highlighter-rouge">toggle(id = id, condition = test)</code>, and code that was doing a similar thing with <code class="highlighter-rouge">addClass</code>/<code class="highlighter-rouge">removeClass</code> can use the <code class="highlighter-rouge">toggleClass(id, class, condition)</code> function.</p>

<h2 id="extra-features">Three new features available on the GitHub version but not yet on CRAN</h2>

<p>Since submitting <code class="highlighter-rouge">shinyjs</code> to CRAN, there were a few more features added. They will go into the next CRAN submission in about a month, but for now they can be used if you download the GitHub version.</p>

<h3 id="hidden"><code class="highlighter-rouge">hidden</code> now accepts multiple tags</h3>

<p>The <code class="highlighter-rouge">hidden</code> function is the only <code class="highlighter-rouge">shinyjs</code> function that’s used in the UI rather than in the server. It’s used to initialize a tag as hidden, and you can later reveal it using <code class="highlighter-rouge">show(tag)</code>.  The initial release only allows single tags to be given to <code class="highlighter-rouge">hidden</code>, but now it can accept any number of tags or a tagList. For example, you can now add a button and some text to the UI and have them both hidden with this code: <code class="highlighter-rouge">hidden(actionButton("btn", "Button"), p(id = "text", "text"))</code>. You can then call <code class="highlighter-rouge">show("btn")</code> or <code class="highlighter-rouge">show("text")</code> to unhide them.</p>

<h3 id="visibility-selector">Visibility functions can be run on any selector</h3>

<p>Previously, the only way to tell the <code class="highlighter-rouge">hide</code>, <code class="highlighter-rouge">show</code>, and <code class="highlighter-rouge">toggle</code> functions what element to act on was to give them an ID. That becomes very limiting when you want to hide or show elements in batch, or even if you just want to show/hide an element without an ID. The visibility functions now have a new optional parameter <code class="highlighter-rouge">selector</code> that accepts any CSS-style selector. For example, to hide all hyperlinks on a page that have the class “hide-me-later” you can now call <code class="highlighter-rouge">hide(selector = "a.hide-me-later")</code>. This makes the visibility functions much more powerful.</p>

<h3 id="visibility-delay">Visibility functions can be delayed</h3>

<p>In a shiny app that I’m currently developing for my graduate work there are many different “Update” buttons that the user can click on. After an update is successful, I wanted to show a “Done!” message that would disappear after a few seconds.  Using <code class="highlighter-rouge">shinyjs</code> I was already able to show the message when I wanted to, but I needed an easy way to make it disappear later. So I added the <code class="highlighter-rouge">delay</code> parameter to <code class="highlighter-rouge">show</code>/<code class="highlighter-rouge">hide</code>/<code class="highlighter-rouge">toggle</code>, that tells the function to only act in x seconds instead of immediately. Now if I want to show a message and hide it after 5 seconds, I can call <code class="highlighter-rouge">show("doneMsg"); hide(id = "doneMsg", delay = 5)</code>.  It’s not a big deal, but it can be handy.</p>

<h2 id="feedback">Feedback + suggestions</h2>

<p>If you have any feedback on <code class="highlighter-rouge">shinyjs</code>, I’d love to <a href="../../../../aboutme/index.html#contact">hear about it</a>!  I really do hope that it’s as easy to use as possible and that many of you will find it useful. If you have any suggestions, please do <a href="https://github.com/daattali/shinyjs/issues">open a GitHub issue</a> or let me know in any other way.</p>

      </article>
      
      
        <div class="blog-tags">
          Tags:
          
            
              <a href="../../../../tags/index.html#professional">professional</a>
            
              <a href="../../../../tags/index.html#rstats">rstats</a>
            
              <a href="../../../../tags/index.html#r-bloggers">r-bloggers</a>
            
              <a href="../../../../tags/index.html#shiny">shiny</a>
            
              <a href="../../../../tags/index.html#packages">packages</a>
            
              <a href="../../../../tags/index.html#shinyjs">shinyjs</a>
            
          
        </div>
      

      
  <div class="share-section">
    <h1 class="share-title">Liked what you read?</h1>
    
    
      <div class="share-buttons">
        
        
        
        
    
        
        
        
        
        <a href="../../../../contact/index.html" data-ga-event=1 data-ga-category="share" data-ga-action="message" data-ga-label="/2015/05/31/shinyjs-extend/">
          Let me know
        </a>
        <!--
        <a href="https://www.facebook.com/dialog/feed?app_id=536330676521989&link=https://deanattali.com/2015/05/31/shinyjs-extend/&name=New shinyjs version: Useful tools for any Shiny app developer + easily call JavaScript functions as R code&caption=deanattali.com&redirect_uri=https://deanattali.com/2015/05/31/shinyjs-extend/?message=Thanks for sharing!" data-ga-event=1 data-ga-category="share" data-ga-action="facebook" data-ga-label="/2015/05/31/shinyjs-extend/">
          Share on Facebook
        </a>
        -->
        <a href="https://www.paypal.me/daattali/10" data-ga-event=1 data-ga-category="share" data-ga-action="donate" data-ga-label="/2015/05/31/shinyjs-extend/">
          Support me
        </a>
        <a href="https://twitter.com/intent/tweet?url=https://deanattali.com/2015/05/31/shinyjs-extend/&amp;via=daattali&amp;hashtags=rstats&amp;text=New%20shinyjs%20version:%20Useful%20tools%20for%20any%20Shiny%20app%20developer%20+%20easily%20call%20JavaScript%20func..." data-ga-event=1 data-ga-category="share" data-ga-action="twitter" data-ga-label="/2015/05/31/shinyjs-extend/">
          Tweet it
        </a>
      </div>
    
    
    
      <!-- MailChimp Signup Form -->
      <div id="mailchimp-subscribe-section-share" class="mailchimp-subscribe-section">
        <div id="mc_embed_signup-share">
          <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-share" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-share">
      	      <label for="mce-EMAIL-share">Sign up to my Shiny newsletter</label>
              <div class="container">
                <div class="row">
                  <div class="col-sm-8 col-xs-12">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-share" placeholder="Email" required="">
                  </div>
                  <div class="col-sm-4 col-xs-12">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-share" class="button">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
            </div>
          </form>
        </div>
      </div>
     

  </div>


      
      

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="../../17/analyzing-rbloggers-posts-via-twitter/index.html" data-toggle="tooltip" data-placement="top" title="Analyzing R-Bloggers' posts via Twitter">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="../../../06/14/mimicking-google-form-shiny/index.html" data-toggle="tooltip" data-placement="top" title="Mimicking a Google Form with a Shiny app">Next Post &rarr;</a>
          </li>
        
      </ul>
      
      
        <div class="disqus-comments">
          
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'deanattali-site';
	    // ensure that pages with query string or anchor get the same discussion
            var url_parts = window.location.href.split("?");
            url_parts = url_parts[0].split("#");
            disqus_url = url_parts[0];
            disqus_url = disqus_url.replace(/(\/)*$/, "/"); // make sure the URL ends with one slash
            disqus_url = disqus_url.replace(/https:\/\//, "http:\/\/"); // make sure new https pages use same comments as old http site
            
            // Jekyll 3 caused so many bugs, I'm tired of fixing them one by one properly, so I'll just hack it...
            // https://github.com/jekyll/jekyll/issues/4483
            // The projects page now has a trailing slash, it didn't used to
            if (disqus_url.substr(-9) == "projects/index.html") {
            	disqus_url = disqus_url.substr(0, disqus_url.length - 1);
            }

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


        </div>
      
      
      <div id="scroll-box">
  <div id="scroll-box-close">&times;</div>
  <div id="scroll-box-hire">
    Need Shiny help?
    <a href="../../../../shiny/index.html">Hire me!</a>
  </div>
  <div id="mailchimp-subscribe-section-scrollbox" class="mailchimp-subscribe-section">
    <div id="mc_embed_signup-scrollbox">
      <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-scrollbox" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll-scrollbox">
  	      <label for="mce-EMAIL-scrollbox">Sign up to my Shiny newsletter</label>
          <div class="container">
            <div class="row">
              <div class="col-sm-8 col-xs-12">
  	            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-scrollbox" placeholder="Email" required="">
              </div>
              <div class="col-sm-4 col-xs-12">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-scrollbox" class="button" title="Sign up to my Shiny newsletter">
              </div>
            </div>
          </div>
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
        </div>
      </form>
    </div>
  </div>
  <div id="scroll-box-contact">
    Questions/comments?
    <a href="../../../../contact/index.html">Contact me!</a>
  </div>
</div>

    </div>
  </div>
</div>


    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          <li>
            <a href="../../../../cdn-cgi/l/email-protection.html#274342464967465353464b4e5342444f0944484a185452454d4244531a6f424b4b48074155484a0743424649465353464b4e0944484a" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://calendly.com/attalitech/meeting" target="_blank" title="Schedule a meeting with me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-calendar-check-o fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/daattali" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/daattali" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://www.facebook.com/daattali" title="Facebook">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://stackoverflow.com/users/3943160/daattali" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          

        

          

        </ul>

        <p class="copyright text-muted">
          &copy; Dean Attali
          &nbsp;&bull;&nbsp;
          2018

          
          &nbsp;&bull;&nbsp;
          <a href="../../../../cdn-cgi/l/email-protection.html#d2b6b7b3bc92b3a6a6b3bebba6b7b1bafcb1bdbfeda1a7b0b8b7b1a6ef9ab7bebebdf2b4a0bdbff2b6b7b3bcb3a6a6b3bebbfcb1bdbf"><span class="__cf_email__" data-cfemail="f692939798b6978282979a9f8293959ed895999b">[email&#160;protected]</span></a>
          
        </p>
        
        <div style="text-align: center; margin: 10px 0 -10px; font-weight: bold;" class="text-muted">
          <!-- Considering purchasing RStudio Connect, Shiny Server Pro, shinyapps.io, or any other RStudio product? Feel free to contact me to discuss. -->
          Want to improve your Shiny skills? Try my new interactive, online video course <a href="https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny-case-studies">Shiny Case Studies</a>
        </div>

        <div id="mailchimp-subscribe-section-footer" class="mailchimp-subscribe-section">
        <div id="mc_embed_signup-footer">
          <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-footer" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-footer">
              <div class="container">
                <div class="row">
                  <div class="col-sm-8 col-xs-12">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-footer" placeholder="Email" required="">
                  </div>
                  <div class="col-sm-4 col-xs-12">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-footer" class="button">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
            </div>
          </form>
        </div>
        </div>

        <p class="theme-by text-muted">
          Theme by
          <a href="../../../../beautiful-jekyll/index.html">beautiful-jekyll</a>
        </p>
      </div>
    </div>
  </div>
</footer>

    
    


  
	<script data-cfasync="false" src="../../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="../../../../js/jquery-1.11.2.min.js"></script>
  
	<script src="../../../../js/bootstrap.min.js"></script>
  
	<script src="../../../../js/js.cookie.js"></script>
  
	<script src="../../../../js/main.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-59820529-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->



     
      <!-- AddThis plugin (floating social media sharing buttons on the left of each post) -->
      <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57d65a4d97789dd1"></script>
    
    
  </body>

<!-- Mirrored from deanattali.com/2015/05/31/shinyjs-extend/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Nov 2018 02:20:43 GMT -->
</html>
