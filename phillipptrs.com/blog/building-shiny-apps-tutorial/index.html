<!DOCTYPE html>
<html lang="en">
  <!-- MIT license | Copyright Dean Attali 2016 -->
  
<!-- Mirrored from deanattali.com/blog/building-shiny-apps-tutorial/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Nov 2018 02:20:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  
  <title>Building Shiny apps - an interactive tutorial</title>
  

  <meta name="author" content="Dean Attali" />
  
  
  <meta name="description" content="If you want tutoring/training in Shiny or need help with building a Shiny app, I’m available for hire. Shiny is a package from RStudio that can be used to build interactive web pages with R. While that may sound scary because of the words “web pages”, it’s geared to R...">
  
  
  <meta name="keywords" content="rstats,r,r shiny,shiny apps,r shiny apps,shiny developer,r shiny developer,shiny consultant,dashboards r,interactive dashboards">

  <link rel="alternate" type="application/rss+xml" title="Dean Attali - R-Shiny developer and consultant with a MSc in Bioinformatics and a Bachelor of Computer Science. Previously a software engineer at Google, IBM, and Wish.com." href="../../feed.xml" />

  
    
      <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    
      
  
  
    
      <link rel="stylesheet" href="../../css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="../../css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="../../css/main.css" />
    
    
  
  
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

    
  
  

  
  
  <!-- Facebook OpenGraph tags -->
  
  <meta property="og:title" content="Building Shiny apps - an interactive tutorial" />
  
  
  <meta property="og:type" content="website" />
  
  
  <meta property="og:url" content="index.html" />
  <link rel="canonical" href="index.html" />
  
  
  
  <meta property="og:image" content="../../img/blog/shiny-tutorial/shiny-addplot.png" />
  

  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@daattali" />
  <meta name="twitter:creator" content="@daattali" />
  <meta name="twitter:title" content="Building Shiny apps - an interactive tutorial" />
  <meta name="twitter:description" content="If you want tutoring/training in Shiny or need help with building a Shiny app, I’m available for hire. Shiny is a package from RStudio that can be used to build interactive web pages with R. While that may sound scary because of the words “web pages”, it’s geared to R..." />
  
  <meta name="twitter:image" content="../../img/blog/shiny-tutorial/shiny-addplot.png" />
    
  
</head>


  <body>
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom ">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">Dean Attali</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            
            





<a href="../../index.html">Blog</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../shiny/index.html">Shiny</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../projects/index.html">Projects</a>

          </li>
        
        
        
          <li>
            
            





<a href="../../aboutme/index.html">About Me / Contact</a>

          </li>
        
        
		
		
		<li>
		  <a href="../../search/index.html" class="nav-search-link" title="Search">
		    <span class="fa fa-search nav-search-icon"></span>
			<span class="nav-search-text">Search</span>
		  </a>
		</li>
		
      </ul>
    </div>
	
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="../../index.html">
	      <img class="avatar-img" src="../../img/deanimg.jpg" />
		</a>
	  </div>
	</div>
	
	
  </div>
</nav>  


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Building Shiny apps - an interactive tutorial</h1>
		  
		  
		  
		    <span class="post-meta">
                      Posted on December 7, 2015
                      
                        | Last updated March 8, 2017
                       
                    </span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      
  <div id="datacamp-course-section">
    <strong>Want to improve your Shiny skills?</strong><br/>
    Try my new interactive online video course: <strong>Shiny Case Studies</strong><br/>
    <a class="btn btn-primary btn-lg" href="https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny-case-studies" target="_blank">
      Try Course! &nbsp;&raquo;
    </a>
  </div>



      
     
      <article role="main" class="blog-post">
        
  
    <div id="deancarbonads" class="sm-horizontal">
      <script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYIL5Q7&amp;placement=deanattalicom" id="_carbonads_js"></script>
    </div>
  


      	<p class="box-note"><strong>If you want tutoring/training in Shiny or need help with building a Shiny app, I’m <a href="../../shiny/index.html">available for hire</a>.</strong></p>

<p>Shiny is a package from RStudio that can be used to build interactive web pages with R. While that may sound scary because of the words “web pages”, it’s geared to R users who have 0 experience with web development, and you do not need to know any HTML/CSS/JavaScript.</p>

<p>You can do quite a lot with Shiny: think of it as an easy way to make an interactive web page, and that web page can seamlessly interact with R and display R objects (plots, tables, of anything else you do in R). To get a sense of the wide range of things you can do with Shiny, you can visit <a href="https://daattali.com/shiny/">my Shiny server</a>, which hosts some of my own Shiny apps.</p>

<p>This tutorial is a hands-on activity complement to a set of <a href="http://bit.ly/shiny-tutorial">presentation slides</a> for learning how to build Shiny apps. In this activity, we’ll walk through all the steps of building a Shiny app using a dataset that lets you explore the products available at the BC Liquor Store. The final version of the app, including a few extra features that are left as exercises for the reader, <a href="https://daattali.com/shiny/bcl/">can be seen here</a>. Any activity deemed as an exercise throughout this tutorial is not mandatory for building our app, but they are good for getting more practice with Shiny.</p>

<p>This tutorial should take approximately an hour to complete. If you want even more practice, another great tutorial is the <a href="https://shiny.rstudio.com/tutorial/">official Shiny tutorial</a>. RStudio also provides a <a href="https://www.rstudio.com/resources/cheatsheets/">handy cheatsheet</a> to remember all the little details after you already learned the basics.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ol>
  <li><a href="#1-before-we-begin">Before we begin</a></li>
  <li><a href="#2-shiny-app-basics">Shiny app basics</a></li>
  <li><a href="#3-create-an-empty-shiny-app">Create an empty Shiny app</a></li>
  <li><a href="#4-load-the-dataset">Load the dataset</a></li>
  <li><a href="#5-build-the-basic-ui">Build the basic UI</a></li>
  <li><a href="#6-add-inputs-to-the-ui">Add inputs to the UI</a></li>
  <li><a href="#7-add-placeholders-for-outputs">Add placeholders for outputs</a></li>
  <li><a href="#8-checkpoint-what-our-app-looks-like-after-implementing-the-ui">Checkpoint: what our app looks like after implementing the UI</a></li>
  <li><a href="#9-implement-server-logic-to-create-outputs">Implement server logic to create outputs</a></li>
  <li><a href="#10-reactivity-101">Reactivity 101</a></li>
  <li><a href="#11-using-uioutput-to-create-ui-elements-dynamically">Using uiOutput() to create UI elements dynamically</a></li>
  <li><a href="#12-final-shiny-app-code">Final Shiny app code</a></li>
  <li><a href="#13-share-your-app-with-the-world">Share your app with the world</a></li>
  <li><a href="#14-more-shiny-features-to-check-out">More Shiny features to check out</a></li>
  <li><a href="#15-awesome-add-on-packages-to-shiny">Awesome add-on packages to Shiny</a></li>
  <li><a href="#16-resources">Resources</a></li>
  <li><a href="#17-ideas-to-improve-our-app">Ideas to improve our app</a></li>
</ol>

<h1 id="1-before-we-begin">1. Before we begin</h1>

<p>You’ll need to have the <code class="highlighter-rouge">shiny</code> package, so install it.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"shiny"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>To ensure you successfully installed Shiny, try running one of the demo apps.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">runExample</span><span class="p">(</span><span class="s2">"01_hello"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>If the example app is running, press <em>Escape</em> to close the app, and you are ready to build your first Shiny app!</p>

<p><strong>Exercise:</strong> Visit <a href="http://www.showmeshiny.com/">ShowMeShiny.com</a>, which is a gallery of user-submitted Shiny apps, and click through some of the showcased apps. Get a feel for the wide range of things you can do with Shiny.</p>

<h1 id="2-shiny-app-basics">2. Shiny app basics</h1>

<p>Every Shiny app is composed of a two parts: a web page that shows the app to the user, and a computer that powers the app. The computer that runs the app can either be your own laptop (such as when you’re running an app from RStudio) or a server somewhere else. You, as the Shiny app developer, need to write these two parts (you’re not going to write a computer, but rather the code that powers the app). In Shiny terminology, they are called <em>UI</em> (user interface) and <em>server</em>.</p>

<p>UI is just a web document that the user gets to see, it’s HTML that you write using Shiny’s functions. The UI is responsible for creating the layout of the app and telling Shiny exactly where things go. The server is responsible for the logic of the app; it’s the set of instructions that tell the web page what to show when the user interacts with the page.</p>

<p>If you look at <a href="https://daattali.com/shiny/bcl/">the app we will be building</a>, the page that you see is built with the UI code. You’ll notice there are some controls that you, as the user, can manipulate. If you adjust the price or choose a country, you’ll notice that the plot and the table get updated. The UI is responsible for creating these controls and telling Shiny <em>where</em> to place the controls and where to place the plot and table, while the server is responsible for creating the actual plot or the data in the table.</p>

<h1 id="3-create-an-empty-shiny-app">3. Create an empty Shiny app</h1>

<p>All Shiny apps follow the same template:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">()</span><span class="w">
</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This template is by itself a working minimal Shiny app that doesn’t do much. It initializes an empty UI and an empty server, and runs an app using these empty parts. Copy this template into a new file named <code class="highlighter-rouge">app.R</code> in a new folder. A few things you should keep in mind:</p>

<ul>
  <li>It is <strong>very important</strong> that the name of the file is <code class="highlighter-rouge">app.R</code>, otherwise it would not be recognized as a Shiny app.</li>
  <li>You should not have any R code after the <code class="highlighter-rouge">shinyApp(ui = ui, server = server)</code> line. That line needs to be the last line in your file.</li>
  <li>It is good practice to place this app in its own folder, and not in a folder that already has other R scripts or files, unless those other files are used by your app.</li>
</ul>

<p>After saving the file, RStudio should recognize that this is a Shiny app, and you should see the usual <em>Run</em> button at the top change to <em>Run App</em>.</p>

<p><a href="../../img/blog/shiny-tutorial/shiny-runapp.png"><img src="../../img/blog/shiny-tutorial/shiny-runapp.png" alt="Shiny Run App" /></a></p>

<p>If you don’t see the <em>Run App</em> button, it means you either have a very old version of RStudio, don’t have Shiny installed, or didn’t follow the file naming conventions.</p>

<p>Click the <em>Run App</em> button, and now your app should run. You won’t see much because it’s an empty app, but you should see that the console has some text printed in the form of <code class="highlighter-rouge">Listening on http://127.0.0.1:5274</code> and that a little stop sign appeared at the top of the console.  You’ll also notice that you can’t run any commands in the console. This is because R is busy–your R session is currently powering a Shiny app and listening for user interaction (which won’t happen because the app has nothing in it yet).</p>

<p>Click the stop button to stop the app, or press the <em>Escape</em> key.</p>

<p><a href="../../img/blog/shiny-tutorial/shiny-stopapp.png"><img src="../../img/blog/shiny-tutorial/shiny-stopapp.png" alt="Shiny Stop App" /></a></p>

<p>You may have noticed that when you click the <em>Run App</em> button, all it’s doing is just running the function <code class="highlighter-rouge">shiny::runApp()</code> in the console. You can run that command instead of clicking the button if you prefer. However, <strong>do not</strong> place the <code class="highlighter-rouge">runApp()</code> function inside the shiny app code!</p>

<p><strong>Exercise:</strong> Try running the empty app using the <code class="highlighter-rouge">runApp()</code> function instead of using the <em>Run App</em> button.</p>

<h2 id="31-alternate-way-to-create-a-shiny-app-separate-ui-and-server-files">3.1 Alternate way to create a Shiny app: separate UI and server files</h2>

<p>Another way to define a Shiny app is by separating the UI and server code into two files: <code class="highlighter-rouge">ui.R</code> and <code class="highlighter-rouge">server.R</code>. This is the preferable way to write Shiny apps when the app is complex and involves more code, but in this tutorial we’ll stick to the simple single file.</p>

<p>If you want to break up your app into these two files, you simply put all code that is assigned to the <code class="highlighter-rouge">ui</code> variable in <code class="highlighter-rouge">ui.R</code> and all the code assigned to the <code class="highlighter-rouge">server</code> function in <code class="highlighter-rouge">server.R</code>. When RStudio sees these two files in the same folder, it will know you’re writing a Shiny app. Note that if you use this method (instead of having one <code class="highlighter-rouge">app.R</code> file), then you do not need to include the <code class="highlighter-rouge">shinyApp(ui = ui, server = server)</code> line.</p>

<p><strong>Exercise:</strong> Try making a new Shiny app by creating the two files <code class="highlighter-rouge">ui.R</code> and <code class="highlighter-rouge">server.R</code>. Rememeber that they have to be in the same folder. Also remember to put them in a <em>new, isolated</em> folder (not where your <code class="highlighter-rouge">app.R</code> already exists).</p>

<h2 id="32-let-rstudio-fill-out-a-shiny-app-template-for-you">3.2 Let RStudio fill out a Shiny app template for you</h2>

<p>You can also create a new Shiny app using RStudio’s menu by selecting <em>File &gt; New File &gt; Shiny Web App…</em>. If you do this, RStudio will let you choose if you want a single-file app (<code class="highlighter-rouge">app.R</code>) or a two-file app (<code class="highlighter-rouge">ui.R</code>+<code class="highlighter-rouge">server.R</code>). RStudio will initialize a simple functional Shiny app with some code in it. I personally don’t use this feature because I find it easier to simply type the few lines of a Shiny app and save the files.</p>

<h1 id="4-load-the-dataset">4. Load the dataset</h1>

<p>The dataset we’ll be using contains information about all the products sold by BC Liquor Store and is provided by <a href="https://www.opendatabc.ca/dataset/bc-liquor-store-product-price-list-current-prices">OpenDataBC</a>. They provide a direct link to download a <em>csv</em> version of the data, and this data has the rare quality that it is immediately clean and useful. You can view the <a href="http://pub.data.gov.bc.ca/datasets/176284/BC_Liquor_Store_Product_Price_List.csv">raw data</a> they provide, but I have taken a few steps to simplify the dataset to make it more useful for our app. I removed some columns, renamed other columns, and dropped a few rare factor levels.</p>

<p>The processed dataset we’ll be using in this app is available <a href="../../files/bcl-data.csv">here</a>. Download it now and place this file in the same folder as your Shiny app. Make sure the file is named <code class="highlighter-rouge">bcl-data.csv</code>.</p>

<p>Add a line in your app to load the data into a variable called <code class="highlighter-rouge">bcl</code>. It should look something like this</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Place this line in your app as the second line, just after <code class="highlighter-rouge">library(shiny)</code>.  Make sure the file path and file name are correct, otherwise your app won’t run. Try to run the app to make sure the file can be loaded without errors.</p>

<p>If you want to verify that the app can successfully read the data, you can add a <code class="highlighter-rouge">print()</code> statement after reading the data. This won’t make anything happen in your Shiny app, but you will see a summary of the dataset printed in the console, which should let you know that the dataset was indeed loaded correctly. You can place the following line after reading the data:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">print</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">bcl</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Once you get confirmation that the data is properly loaded, you can remove that line.</p>

<blockquote>
  <p>In case you’re curious, the code I used to process the raw data into the data we’ll be using is available <a href="https://gist.github.com/daattali/56b9fa8f3e99174fba63">as a gist</a>.</p>
</blockquote>

<p><strong>Exercise:</strong> Load the data file into R and get a feel for what’s in it. How big is it, what variables are there, what are the normal price ranges, etc.</p>

<h1 id="5-build-the-basic-ui">5. Build the basic UI</h1>

<p>Let’s start populating our app with some elements visually. This is usually the first thing you do when writing a Shiny app - add elements to the UI.</p>

<h2 id="51-add-plain-text-to-the-ui">5.1 Add plain text to the UI</h2>

<p>You can place R strings inside <code class="highlighter-rouge">fluidPage()</code> to render text.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fluidPage</span><span class="p">(</span><span class="s2">"BC Liquor Store"</span><span class="p">,</span><span class="w"> </span><span class="s2">"prices"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Replace the line in your app that assigns an empty <code class="highlighter-rouge">fluidPage()</code> into <code class="highlighter-rouge">ui</code> with the one above, and run the app.</p>

<p>The entire UI will be built by passing comma-separated arguments into the <code class="highlighter-rouge">fluidPage()</code> function. By passing regular text, the web page will just render boring unformatted text.</p>

<p><strong>Exercise:</strong> Add several more strings to <code class="highlighter-rouge">fluidPage()</code> and run the app. Nothing too exciting is happening yet, but you should just see all the text appear in one contiguous block.</p>

<h2 id="52-add-formatted-text-and-other-html-elements">5.2 Add formatted text and other HTML elements</h2>

<p>If we want our text to be formatted nicer, Shiny has many functions that are wrappers around HTML tags that format text. We can use the <code class="highlighter-rouge">h1()</code> function for a top-level header (<code class="highlighter-rouge">&lt;h1&gt;</code> in HTML), <code class="highlighter-rouge">h2()</code> for a secondary header (<code class="highlighter-rouge">&lt;h2&gt;</code> in HTML), <code class="highlighter-rouge">strong()</code> to make text bold (<code class="highlighter-rouge">&lt;strong&gt;</code> in HTML), <code class="highlighter-rouge">em()</code> to make text italicized (<code class="highlighter-rouge">&lt;em&gt;</code> in HTML), and many more.</p>

<p>There are also functions that are wrappers to other HTML tags, such as <code class="highlighter-rouge">br()</code> for a line break, <code class="highlighter-rouge">img()</code> for an image, <code class="highlighter-rouge">a()</code> for a hyperlink, and others.</p>

<p>All of these functions are actually just wrappers to HTML tags with the equivalent name. You can add any arbitrary HTML tag using the <code class="highlighter-rouge">tags</code> object, which you can learn more about by reading the help file on <code class="highlighter-rouge">tags</code>.</p>

<p>Just as a demonstration, try replacing the <code class="highlighter-rouge">fluidPage()</code> function in your UI with</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">h</span><span class="m">1</span><span class="p">(</span><span class="s2">"My app"</span><span class="p">),</span><span class="w">
  </span><span class="s2">"BC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Liquor"</span><span class="p">,</span><span class="w">
  </span><span class="n">br</span><span class="p">(),</span><span class="w">
  </span><span class="s2">"Store"</span><span class="p">,</span><span class="w">
  </span><span class="n">strong</span><span class="p">(</span><span class="s2">"prices"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Run the app with this code as the UI. Notice the formatting of the text and understand why it is rendered that way.</p>

<blockquote>
  <p>For people who know basic HTML: any named argument you pass to an HTML function becomes an attribute of the HTML element, and any unnamed argument will be a child of the element. That means that you can, for example, create blue text with <code class="highlighter-rouge">div("this is blue", style = "color: blue;")</code>.</p>
</blockquote>

<p><strong>Exercise:</strong> Experiment with different HTML-wrapper functions inside <code class="highlighter-rouge">fluidPage()</code>. Run the <code class="highlighter-rouge">fluidPage(...)</code> function in the console and see the HTML that it creates.</p>

<h2 id="53-add-a-title">5.3 Add a title</h2>

<p>We could add a title to the app with <code class="highlighter-rouge">h1()</code>, but Shiny also has a special function <code class="highlighter-rouge">titlePanel()</code>. Using <code class="highlighter-rouge">titlePanel()</code> not only adds a visible big title-like text to the top of the page, but it also sets the “official” title of the web page. This means that when you look at the name of the tab in the browser, you’ll see this title.</p>

<p>Overwrite the <code class="highlighter-rouge">fluidPage()</code> that you experimented with so far, and replace it with the simple one below, that simply has a title and nothing else.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><strong>Exercise:</strong> Look at the documentation for the <code class="highlighter-rouge">titlePanel()</code> function and notice it has another argument. Use that argument and see if you can see what it does.</p>

<h2 id="54-add-a-layout">5.4 Add a layout</h2>

<p>You may have noticed that so far, by just adding text and HTML tags, everything is unstructured and the elements simply stack up one below the other in one column. We’ll use <code class="highlighter-rouge">sidebarLayout()</code> to add a simple structure. It provides a simple two-column layout with a smaller sidebar and a larger main panel. We’ll build our app such that all the inputs that the user can manipulate will be in the sidebar, and the results will be shown in the main panel on the right.</p>

<p>Add the following code after the <code class="highlighter-rouge">titlePanel()</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
  </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="s2">"our inputs will go here"</span><span class="p">),</span><span class="w">
  </span><span class="n">mainPanel</span><span class="p">(</span><span class="s2">"the results will go here"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Remember that all the arguments inside <code class="highlighter-rouge">fluidPage()</code> need to be separated by commas.</p>

<p>So far our complete app looks like this (hopefully this isn’t a surprise to you)</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">),</span><span class="w">
  </span><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
    </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="s2">"our inputs will go here"</span><span class="p">),</span><span class="w">
    </span><span class="n">mainPanel</span><span class="p">(</span><span class="s2">"the results will go here"</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><a href="../../img/blog/shiny-tutorial/shiny-layout.png"><img src="../../img/blog/shiny-tutorial/shiny-layout.png" alt="Shiny layout" /></a></p>

<blockquote>
  <p>If you want to be a lot more flexible with the design, you can have much more fine control over where things go by using a grid layout. We won’t cover that here, but if you’re interested, look at the documentation for <code class="highlighter-rouge">?column</code> and <code class="highlighter-rouge">?fluidRow</code>.</p>
</blockquote>

<p><strong>Exercise:</strong> Add some UI into each of the two panels (sidebar panel and main panel) and see how your app now has two columns.</p>

<h2 id="55-all-ui-functions-are-simply-html-wrappers">5.5 All UI functions are simply HTML wrappers</h2>

<p>This was already mentioned, but it’s important to remember: the enire UI is just HTML, and Shiny simply gives you easy tools to write it without having to know HTML. To convince yourself of this, look at the output when printing the contents of the <code class="highlighter-rouge">ui</code> variable.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">print</span><span class="p">(</span><span class="n">ui</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## &lt;div class="container-fluid"&gt;
##   &lt;h2&gt;BC Liquor Store prices&lt;/h2&gt;
##   &lt;div class="row"&gt;
##     &lt;div class="col-sm-4"&gt;
##       &lt;form class="well"&gt;our inputs will go here&lt;/form&gt;
##     &lt;/div&gt;
##     &lt;div class="col-sm-8"&gt;the results will go here&lt;/div&gt;
##   &lt;/div&gt;
## &lt;/div&gt;
</code></pre></div></div>

<p>This should make you appreciate Shiny for not making you write horrendous HTML by hand.</p>

<h1 id="6-add-inputs-to-the-ui">6. Add inputs to the UI</h1>

<p>Inputs are what gives users a way to interact with a Shiny app. Shiny provides many input functions to support many kinds of interactions that the user could have with an app. For example, <code class="highlighter-rouge">textInput()</code> is used to let the user enter text, <code class="highlighter-rouge">numericInput()</code> lets the user select a number, <code class="highlighter-rouge">dateInput()</code> is for selecting a date, <code class="highlighter-rouge">selectInput()</code> is for creating a select box (aka a dropdown menu).</p>

<p><a href="../../img/blog/shiny-tutorial/shiny-inputs.png"><img src="../../img/blog/shiny-tutorial/shiny-inputs.png" alt="Shiny inputs" /></a></p>

<p>All input functions have the same first two arguments: <code class="highlighter-rouge">inputId</code> and <code class="highlighter-rouge">label</code>. The <code class="highlighter-rouge">inputId</code> will be the name that Shiny will use to refer to this input when you want to retrieve its current value. It is important to note that every input must have a unique <code class="highlighter-rouge">inputId</code>. If you give more than one input the same id, Shiny will unfortunately not give you an explicit error, but your app won’t work correctly. The <code class="highlighter-rouge">label</code> argument specifies the text in the display label that goes along with the input widget. Every input can also have multiple other arguments specific to that input type. The only way to find out what arguments you can use with a specific input function is to look at its help file.</p>

<p><strong>Exercise:</strong> Read the documentation of <code class="highlighter-rouge">?numericInput</code> and try adding a numeric input to the UI. Experiment with the different arguments. Run the app and see how you can interact with this input. Then try different inputs types.</p>

<h2 id="61-input-for-price">6.1 Input for price</h2>

<p>The first input we want to have is for specifying a price range (minimum and maximum price). The most sensible types of input for this are either <code class="highlighter-rouge">numericInput()</code> or <code class="highlighter-rouge">sliderInput()</code> since they are both used for selecting numbers. If we use <code class="highlighter-rouge">numericInput()</code>, we’d have to use two inputs, one for the minimum value and one for the maximum. Looking at the documentation for <code class="highlighter-rouge">sliderInput()</code>, you’ll see that by supplying a vector of length two as the <code class="highlighter-rouge">value</code> argument, it can be used to specify a range rather than a single number. This sounds like what we want in this case, so we’ll use <code class="highlighter-rouge">sliderInput()</code>.</p>

<p>To create a slider input, a maximum value needs to be provided. We could use the maximum price in the dataset, which is $30,250, but I doubt I’d ever buy something that expensive. I think $100 is a more reasonable max price for me, and about 85% of the products in this dataset are below $100, so let’s use that as our max.</p>

<p>By looking at the documentation for the slider input function, the following piece of code can be constructed.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"priceInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w">
            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">),</span><span class="w"> </span><span class="n">pre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Place the code for the slider input inside <code class="highlighter-rouge">sidebarPanel()</code> (replace the text we wrote earlier with this input).</p>

<p><strong>Exercise:</strong> Run the code of the <code class="highlighter-rouge">sliderInput()</code> in the R console and see what it returns. Change some of the parameters of <code class="highlighter-rouge">sliderInput()</code>, and see how that changes the result.  It’s important to truly understand that all these functions in the UI are simply a convenient way to write HTML, as is apparent whenever you run these functions on their own.</p>

<h2 id="62-input-for-product-type">6.2 Input for product type</h2>

<p>Usually when going to the liquor store you know whether you’re looking for beer or wine, and you don’t want to waste your time in the wrong section.  The same is true in our app, we should be able to choose what type of product we want.</p>

<p>For this we want some kind of a text input. But allowing the user to enter text freely isn’t the right solution because we want to restrict the user to only a few choices.  We could either use radio buttons or a select box for our purpose. Let’s use radio buttons for now since there are only a few options, so take a look at the documentation for <code class="highlighter-rouge">radioButtons()</code> and come up with a reasonable input function code.  It should look like this:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">radioButtons</span><span class="p">(</span><span class="s2">"typeInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Product type"</span><span class="p">,</span><span class="w">
            </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BEER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"REFRESHMENT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SPIRITS"</span><span class="p">,</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
            </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Add this input code inside <code class="highlighter-rouge">sidebarPanel()</code>, after the previous input (separate them with a comma).</p>

<blockquote>
  <p>If you look at that input function and think “what if there were 100 types, listing them by hand would not be fun, there’s got to be a better way!”, then you’re right.  This is where <a href="#11-using-uioutput-to-create-ui-elements-dynamically"><code class="highlighter-rouge">uiOutput()</code></a> comes in handy, but we’ll talk about that later.</p>
</blockquote>

<h2 id="63-input-for-country">6.3 Input for country</h2>

<p>Sometimes I like to feel fancy and only look for wines imported from France. We should add one last input, to select a country. The most appropriate input type in this case is probably the select box. Look at the documentation for <code class="highlighter-rouge">selectInput()</code> and create an input function. For now let’s only have CANADA, FRANCE, ITALY as options, and later we’ll see how to include all countries.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
            </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"CANADA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"FRANCE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ITALY"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Add this function as well to your app.  If you followed along, your entire app should have this code:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">),</span><span class="w">
  </span><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
    </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"priceInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">),</span><span class="w"> </span><span class="n">pre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$"</span><span class="p">),</span><span class="w">
      </span><span class="n">radioButtons</span><span class="p">(</span><span class="s2">"typeInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Product type"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BEER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"REFRESHMENT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SPIRITS"</span><span class="p">,</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
                  </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
      </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"CANADA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"FRANCE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ITALY"</span><span class="p">))</span><span class="w">
    </span><span class="p">),</span><span class="w">
    </span><span class="n">mainPanel</span><span class="p">(</span><span class="s2">"the results will go here"</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><a href="../../img/blog/shiny-tutorial/shiny-addinputs.png"><img src="../../img/blog/shiny-tutorial/shiny-addinputs.png" alt="Shiny add inputs" /></a></p>

<h1 id="7-add-placeholders-for-outputs">7. Add placeholders for outputs</h1>

<p>After creating all the inputs, we should add elements to the UI to display the outputs. Outputs can be any object that R creates and that we want to display in our app - such as a plot, a table, or text. We’re still only building the UI, so at this point we can only add <em>placeholders</em> for the outputs that will determine where an output will be and what its ID is, but it won’t actually show anything. Each output needs to be constructed in the server code later.</p>

<p>Shiny provides several output functions, one for each type of output. Similarly to the input functions, all the ouput functions have a <code class="highlighter-rouge">outputId</code> argument that is used to identify each output, and this argument must be unique for each output.</p>

<h2 id="71-output-for-a-plot-of-the-results">7.1 Output for a plot of the results</h2>

<p>At the top of the main panel we’ll have a plot showing some visualization of the results. Since we want a plot, the function we use is <code class="highlighter-rouge">plotOutput()</code>.</p>

<p>Add the following code into the <code class="highlighter-rouge">mainPanel()</code> (replace the existing text):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plotOutput</span><span class="p">(</span><span class="s2">"coolplot"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This will add a placeholder in the UI for a plot named <em>coolplot</em>.</p>

<p><strong>Exercise:</strong> To remind yourself that we are still merely constructing HTML and not creating actual plots yet, run the above <code class="highlighter-rouge">plotOutput()</code> function in the console to see that all it does is create some HTML.</p>

<h2 id="72-output-for-a-table-summary-of-the-results">7.2 Output for a table summary of the results</h2>

<p>Below the plot, we will have a table that shows all the results.  To get a table, we use the <code class="highlighter-rouge">tableOutput()</code> function.</p>

<p>Here is a simple way to create a UI element that will hold a table output:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tableOutput</span><span class="p">(</span><span class="s2">"results"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Add this output to the <code class="highlighter-rouge">mainPanel()</code> as well. Maybe add a couple <code class="highlighter-rouge">br()</code> in between the two outputs, just as a space buffer so that they aren’t too close to each other.</p>

<h1 id="8-checkpoint-what-our-app-looks-like-after-implementing-the-ui">8. Checkpoint: what our app looks like after implementing the UI</h1>

<p>If you’ve followed along, your app should now have this code:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">),</span><span class="w">
  </span><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
    </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"priceInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">),</span><span class="w"> </span><span class="n">pre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$"</span><span class="p">),</span><span class="w">
      </span><span class="n">radioButtons</span><span class="p">(</span><span class="s2">"typeInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Product type"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BEER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"REFRESHMENT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SPIRITS"</span><span class="p">,</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
                  </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
      </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"CANADA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"FRANCE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ITALY"</span><span class="p">))</span><span class="w">
    </span><span class="p">),</span><span class="w">
    </span><span class="n">mainPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">plotOutput</span><span class="p">(</span><span class="s2">"coolplot"</span><span class="p">),</span><span class="w">
      </span><span class="n">br</span><span class="p">(),</span><span class="w"> </span><span class="n">br</span><span class="p">(),</span><span class="w">
      </span><span class="n">tableOutput</span><span class="p">(</span><span class="s2">"results"</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h1 id="9-implement-server-logic-to-create-outputs">9. Implement server logic to create outputs</h1>

<p>So far we only wrote code inside that was assigned to the <code class="highlighter-rouge">ui</code> variable (or code that was written in <code class="highlighter-rouge">ui.R</code>). That’s usually the easier part of a Shiny app. Now we have to write the <code class="highlighter-rouge">server</code> function, which will be responsible for listening to changes to the inputs and creating outputs to show in the app.</p>

<p>If you look at the server function, you’ll notice that it is always defined with two arguments: <code class="highlighter-rouge">input</code> and <code class="highlighter-rouge">output</code>. You <em>must</em> define these two arguments! Both <code class="highlighter-rouge">input</code> and <code class="highlighter-rouge">output</code> are list-like objects. As the names suggest, <code class="highlighter-rouge">input</code> is a list you will read values <em>from</em> and <code class="highlighter-rouge">output</code> is a list you will write values <em>to</em>. <code class="highlighter-rouge">input</code> will contain the values of all the different inputs at any given time, and <code class="highlighter-rouge">output</code> is where you will save output objects (such as tables and plots) to display in your app.</p>

<h2 id="91-building-an-output">9.1 Building an output</h2>

<p>Recall that we created two output placeholders: <em>coolplot</em> (a plot) and <em>results</em> (a table). We need to write code in R that will tell Shiny what kind of plot or table to display. There are three rules to build an output in Shiny.</p>

<ol>
  <li>Save the output object into the <code class="highlighter-rouge">output</code> list (remember the app template - every server function has an <code class="highlighter-rouge">output</code> argument)</li>
  <li>Build the object with a <code class="highlighter-rouge">render*</code> function, where <code class="highlighter-rouge">*</code> is the type of output</li>
  <li>Access input values using the <code class="highlighter-rouge">input</code> list (every server function has an <code class="highlighter-rouge">input</code> argument)</li>
</ol>

<p>The third rule is only required if you want your output to depend on some input, so let’s first see how to build a very basic output using only the first two rules. We’ll create a plot and send it to the <em>coolplot</em> output.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="n">plot</span><span class="p">(</span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">))</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>This simple code shows the first two rules: we’re creating a plot inside the <code class="highlighter-rouge">renderPlot()</code> function, and assigning it to <em>coolplot</em> in the <code class="highlighter-rouge">output</code> list. Remember that every output created in the UI must have a unique ID, now we see why. In order to attach an R object to an output with ID <em>x</em>, we assign the R object to <code class="highlighter-rouge">output$x</code>.</p>

<p>Since <em>coolplot</em> was defined as a <code class="highlighter-rouge">plotOutput</code>, we must use the <code class="highlighter-rouge">renderPlot</code> function, and we must create a plot inside the <code class="highlighter-rouge">renderPlot</code> function.</p>

<p>If you add the code above inside the server function, you should see a plot with 100 random points in the app.</p>

<p><strong>Exercise:</strong> The code inside <code class="highlighter-rouge">renderPlot()</code> doesn’t have to be only one line, it can be as long as you’d like as long as it returns a plot. Try making a more complex plot using <code class="highlighter-rouge">ggplot2</code>. The plot doesn’t have to use our dataset, it could be anything, just to make sure you can use <code class="highlighter-rouge">renderPlot()</code>.</p>

<h2 id="92-making-an-output-react-to-an-input">9.2 Making an output react to an input</h2>

<p>Now we’ll take the plot one step further. Instead of always plotting the same plot (100 random numbers), let’s use the minimum price selected as the number of points to show. It doesn’t make too much sense, but it’s just to learn how to make an output depend on an input.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="n">plot</span><span class="p">(</span><span class="n">rnorm</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">]))</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Replace the previous code in your server function with this code, and run the app. Whenever you choose a new minimum price range, the plot will update with a new number of points. Notice that the only thing different in the code is that instead of using the number <code class="highlighter-rouge">100</code> we are using <code class="highlighter-rouge">input$priceInput[1]</code>.</p>

<p>What does this mean? Just like the variable <code class="highlighter-rouge">output</code> contains a list of all the outputs (and we need to assign code into them), the variable <code class="highlighter-rouge">input</code> contains a list of all the inputs that are defined in the UI. <code class="highlighter-rouge">input$priceInput</code> return a vector of length 2 containing the miminimum and maximum price. Whenever the user manipulates the slider in the app, these values are updated, and whatever code relies on it gets re-evaluated. This is a concept known as <a href="#10-reactivity-101"><strong>reactivity</strong></a>, which we will get to in a few minutes.</p>

<p>Notice that these short 3 lines of code are using all the 3 rules for building outputs: we are saving to the <code class="highlighter-rouge">output</code> list (<code class="highlighter-rouge">output$coolplot &lt;-</code>), we are using a <code class="highlighter-rouge">render*</code> function to build the output (<code class="highlighter-rouge">renderPlot({})</code>), and we are accessing an input value (<code class="highlighter-rouge">input$priceInput[1]</code>).</p>

<h2 id="93-building-the-plot-output">9.3 Building the plot output</h2>

<p>Now we have all the knowledge required to build a plot visualizing some aspect of the data. We’ll create a simple histogram of the alcohol content of the products by using the same 3 rules to create a plot output.</p>

<p>First we need to make sure <code class="highlighter-rouge">ggplot2</code> is loaded, so add a <code class="highlighter-rouge">library(ggplot2)</code> at the top.</p>

<p>Next we’ll return a histogram of alcohol content from <code class="highlighter-rouge">renderPlot()</code>. Let’s start with just a histogram of the whole data, unfiltered.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">bcl</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>If you run the app with this code inside your server, you should see a histogram in the app.  But if you change the input values, nothing happens yet, so the next step is to actually filter the dataset based on the inputs.</p>

<p>Recall that we have 3 inputs: <code class="highlighter-rouge">priceInput</code>, <code class="highlighter-rouge">typeInput</code>, and <code class="highlighter-rouge">countryInput</code>. We can filter the data based on the values of these three inputs. We’ll use <code class="highlighter-rouge">dplyr</code> functions to filter the data, so be sure to include <code class="highlighter-rouge">dplyr</code> at the top. Then we’ll plot the filtered data instead of the original data.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
    </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
           </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
           </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
           </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">filtered</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Place this code in your server function and run the app. If you change any input, you should see the histogram update. The way I know the histogram is correct is by noticing that the alcohol content is about 5% when I select beer, 40% for spirits, and 13% for wine. That sounds right.</p>

<p>Read this code and understand it. You’ve successfully created an interactive app - the plot is changing according to the user’s selection.</p>

<p>To make sure we’re on the same page, here is what your code should look like at this point:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">

</span><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">),</span><span class="w">
  </span><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
    </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"priceInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">),</span><span class="w"> </span><span class="n">pre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$"</span><span class="p">),</span><span class="w">
      </span><span class="n">radioButtons</span><span class="p">(</span><span class="s2">"typeInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Product type"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BEER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"REFRESHMENT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SPIRITS"</span><span class="p">,</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
                  </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
      </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"CANADA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"FRANCE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ITALY"</span><span class="p">))</span><span class="w">
    </span><span class="p">),</span><span class="w">
    </span><span class="n">mainPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">plotOutput</span><span class="p">(</span><span class="s2">"coolplot"</span><span class="p">),</span><span class="w">
      </span><span class="n">br</span><span class="p">(),</span><span class="w"> </span><span class="n">br</span><span class="p">(),</span><span class="w">
      </span><span class="n">tableOutput</span><span class="p">(</span><span class="s2">"results"</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
    </span><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
      </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
             </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
             </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
             </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
      </span><span class="p">)</span><span class="w">
    </span><span class="n">ggplot</span><span class="p">(</span><span class="n">filtered</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
      </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><a href="../../img/blog/shiny-tutorial/shiny-addplot.png"><img src="../../img/blog/shiny-tutorial/shiny-addplot.png" alt="Shiny add plot" /></a></p>

<p><strong>Exercise:</strong> The current plot doesn’t look very nice, you could enhance the plot and make it much more pleasant to look at.</p>

<h2 id="94-building-the-table-output">9.4 Building the table output</h2>

<p>Building the next output should be much easier now that we’ve done it once.  The other output we have was called <code class="highlighter-rouge">results</code> (as defined in the UI) and should be a table of all the products that match the filters.  Since it’s a table output, we should use the <code class="highlighter-rouge">renderTable()</code> function. We’ll do the exact same filtering on the data, and then simply return the data as a data.frame. Shiny will know that it needs to display it as a table because it’s defined as a <code class="highlighter-rouge">tableOutput</code>.</p>

<p>The code for creating the table output should make sense to you without too much explanation:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderTable</span><span class="p">({</span><span class="w">
  </span><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
    </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
           </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
           </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
           </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="n">filtered</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Add this code to your server. Don’t overwrite the previous definition of <code class="highlighter-rouge">output$coolplot</code>, just add this code before or after that, but inside the server function. Run your app, and be amazed! You can now see a table showing all the products at the BC Liquor Store that match your criteria.</p>

<p><strong>Exercise:</strong> Add a new output. Either a new plot, a new table, or some piece of text that changes based on the inputs. For example, you could add a text output (<code class="highlighter-rouge">textOutput()</code> in the UI, <code class="highlighter-rouge">renderText()</code> in the server) that says how many results were found. If you choose to do this, I recommend first adding the output to the UI, then building the output in the server with static text to make sure you have the syntax correct. Only once you can see the text output in your app you should make it reflect the inputs. Protip: since <code class="highlighter-rouge">textOutput()</code> is written in the UI, you can wrap it in other UI functions. For example, <code class="highlighter-rouge">h2(textOutput(...))</code> will result in larger text.</p>

<h1 id="10-reactivity-101">10. Reactivity 101</h1>

<p>Shiny uses a concept called <strong>reactive</strong> programming. This is what enables your outputs to <em>react</em> to changes in inputs.  Reactivity in Shiny is complex, but as an extreme oversimplification, it means that when the value of a variable <code class="highlighter-rouge">x</code> changes, then anything that relies on <code class="highlighter-rouge">x</code> gets re-evaluated.  Notice how this is very different from what you are used to in R.  Consider the following code:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></code></pre></div></div>

<p>What is the value of <code class="highlighter-rouge">y</code>? It’s 6.  But in reactive programming, if <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> are reactive variables, then the value of <code class="highlighter-rouge">y</code> would be 11 because it would be updated whenever <code class="highlighter-rouge">x</code> is changed. This is a very powerful technique that is very useful for creating the responsiveness of Shiny apps, but it might be a bit weird at first because it’s a very different concept from what you’re used to.</p>

<p>Only <em>reactive</em> variables behave this way, and in Shiny all inputs are automatically reactive. That’s why you can always use <code class="highlighter-rouge">input$x</code> in render functions, and you can be sure that whatever output depends on <code class="highlighter-rouge">x</code> will use the updated value of <code class="highlighter-rouge">x</code> whenever <code class="highlighter-rouge">x</code> changes.</p>

<p>You might be wondering what it means to “depend” on a variable. This is not the official terminology, but it simply means that the variable is referenced in the code. So by merely accessing the value of a reactive variable, it causes the current code block to “depend” on that variable.  Consider the following sample code to create a plot with a specific number of points in a specific colour:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">someoutput</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="n">col</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">mycolour</span><span class="w">
  </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">mynumber</span><span class="w">
  </span><span class="n">plot</span><span class="p">(</span><span class="n">rnorm</span><span class="p">(</span><span class="n">num</span><span class="p">),</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>The above render function accesses two different inputs: <code class="highlighter-rouge">input$mycolour</code> and <code class="highlighter-rouge">input$mynumber</code>. This means that this code block depends on <em>both</em> of these variables, so whenever either one of the two inputs is updated, the code gets re-executed with the new input values and <code class="highlighter-rouge">output$someoutput</code> is updated.</p>

<h2 id="101-creating-and-accessing-reactive-variables">10.1 Creating and accessing reactive variables</h2>

<p>One very important thing to remember about reactive variables (such as the <code class="highlighter-rouge">input</code> list) is that <strong>they can only be used inside reactive contexts</strong>. Any <code class="highlighter-rouge">render*</code> function is a reactive context, so you can always use <code class="highlighter-rouge">input$x</code> or any other reactive variable inside render functions. There are two other common reactive contexts that we’ll get to in a minute: <code class="highlighter-rouge">reactive({})</code> and <code class="highlighter-rouge">observe({})</code>. To show you what this means, let’s try accessing the price input value in the server function, without explicitly being inside a reactive context. Simply add <code class="highlighter-rouge">print(input$priceInput)</code> inside the <code class="highlighter-rouge">server</code> function, and you will get an error when running the app:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Operation not allowed without an active reactive context. (You tried to do something that can only be done from inside a reactive expression or observer.)
</code></pre></div></div>

<p>Shiny is very clear about what the error is: we are trying to access a reactive variable outside of a reactive context. To fix this, we can use the <code class="highlighter-rouge">observe({})</code> function to access the <code class="highlighter-rouge">input</code> variable.  Inside the server, replace <code class="highlighter-rouge">print(input$priceInput)</code> with <code class="highlighter-rouge">observe({ print(input$priceInput) })</code>, and now the app should run fine. Note that this <code class="highlighter-rouge">observe({})</code> statement <em>depends</em> on <code class="highlighter-rouge">input$priceInput</code>, so whenever you change the value of the price, the code inside this <code class="highlighter-rouge">observe({})</code> will run again, and the new value will be printed. This is actually a very simple yet useful debugging technique in Shiny: often you want to know what value a reactive variable holds, so you need to remember to wrap the <code class="highlighter-rouge">cat(input$x)</code> or <code class="highlighter-rouge">print(input$x)</code> by an <code class="highlighter-rouge">observe({})</code>.</p>

<p>So far we only saw one reactive variable: the <code class="highlighter-rouge">input</code> list. You can also create your own reactive variables using the <code class="highlighter-rouge">reactive({})</code> function. The <code class="highlighter-rouge">reactive({})</code> function is similar to <code class="highlighter-rouge">observe({})</code> in that it is also a reactive context, which means that it will get re-run whenever any of the reactive variables in it get updated. The difference between them is that <code class="highlighter-rouge">reactive({})</code> returns a value. To see it in action, let’s create a variable called <code class="highlighter-rouge">priceDiff</code> that will be the difference between the maximum and minimum price selected. If you try to naively define <code class="highlighter-rouge">priceDiff &lt;- diff(input$priceInput)</code>, you’ll see the same error as before about doing something outside a reactive context. This is because <code class="highlighter-rouge">input$priceInput</code> is a reactive variable, and we can’t use a reactive variable outside a reactive context. Since we want to assign a value, we use the <code class="highlighter-rouge">reactive({})</code> function. Try adding the following line to your server:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">priceDiff</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reactive</span><span class="p">({</span><span class="w">
  </span><span class="n">diff</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Now your app will run. If you want to access a reactive variable defined with <code class="highlighter-rouge">reactive({})</code>, <strong>you must add parentheses after the variable name, as if it’s a function</strong>. To demonstrate this, add <code class="highlighter-rouge">observe({ print(priceDiff()) })</code> to your server function. Notice that we use <code class="highlighter-rouge">priceDiff()</code> rather than <code class="highlighter-rouge">priceDiff</code>. It’s very important to remember this, because you can get confusing unclear errors if you simply try to access a custom reactive variable without the parentheses.</p>

<p>You can think of reactivity as causing a chain reaction: when one reactive value changes, anything that depends on it will get updated. If any of the updated values are themselves reactive variables, then any reactive contexts that depend on those variables will also get updated in turn. As a concrete example, let’s think about what happens when you change the value of the <code class="highlighter-rouge">priceInput</code> on the page. Since <code class="highlighter-rouge">input$priceInput</code> is a reactive variable, any expression that uses it will get updated. This means the two render functions from earlier will execute because they both depend on <code class="highlighter-rouge">input$priceInput</code>, as well as the <code class="highlighter-rouge">priceDiff</code> variable because it also depends on it. But since <code class="highlighter-rouge">priceDiff</code> is itself a reactive variable, Shiny will check if there is anything that depends on <code class="highlighter-rouge">priceDiff</code>, and indeed there is - the <code class="highlighter-rouge">observe({})</code> function that prints the value of <code class="highlighter-rouge">priceDiff</code>. So once <code class="highlighter-rouge">priceDiff</code> gets updated, the <code class="highlighter-rouge">observe({})</code> function will run, and the value will get printed.</p>

<p>Reactivity is usually the hardest part about Shiny to understand, so if you don’t quite get it, don’t feel bad. Try reading this section again, and I promise that with time and experience you will get more comfortable with reactivity. Once you do feel more confident with reactivity, it may be a good idea to read more advanced documentation describing reactivity, since this section greatly simplifies ideas to make them more understandable. A great resource is RStudio’s <a href="http://shiny.rstudio.com/articles/execution-scheduling.html">tutorial on reactivity</a>.</p>

<p>Before continuing to the next section, you can remove all the <code class="highlighter-rouge">observe({})</code> and <code class="highlighter-rouge">reactive({})</code> functions we wrote in this section since they were all just for learning purposes.</p>

<p><strong>Exercise:</strong> Read this section again and really understand what a reactive variable means, what the 3 main reactive contexts are, how you can define reactive variables, and how a reactivity chain of events works.</p>

<h2 id="102-using-reactive-variables-to-reduce-code-duplication">10.2 Using reactive variables to reduce code duplication</h2>

<p>You may have noticed that we have the exact same code filtering the dataset in two places, once in each render function. We can solve that problem by defining a reactive variable that will hold the filtered dataset, and use that variable in the render functions.</p>

<p>The first step would be to create the reactive variable. The following code should be added to the server function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reactive</span><span class="p">({</span><span class="w">
  </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
           </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
           </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
           </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
    </span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>The variable <code class="highlighter-rouge">filtered</code> is being defined exactly like before, except the body is wrapped by a <code class="highlighter-rouge">reactive({})</code>, and it’s defined in the server function instead of inside the individual render functions. Now that we have our reactive variable, we can use it in the output render functions.  Try it yourself, and when you think you’re done, check the code below. Don’t forget that in order to access the value of a reactive expression, you must follow the name of the variable with parentheses! This is how your server function should look like now.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reactive</span><span class="p">({</span><span class="w">
    </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
             </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
             </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
             </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">})</span><span class="w">
  
  </span><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
    </span><span class="n">ggplot</span><span class="p">(</span><span class="n">filtered</span><span class="p">(),</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
      </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
  </span><span class="p">})</span><span class="w">

  </span><span class="n">output</span><span class="o">$</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderTable</span><span class="p">({</span><span class="w">
    </span><span class="n">filtered</span><span class="p">()</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>As a reminder, Shiny creates a dependency tree with all the reactive expressions to know what value depends on what other value. For example, when the price input changes, Shiny looks at what values depend on price, and sees that <code class="highlighter-rouge">filtered</code> is a reactive expression that depends on the price input, so it re-evaluates <code class="highlighter-rouge">filtered</code>. Then, because <code class="highlighter-rouge">filtered</code> is changed, Shiny now looks to see what expressions depend on <code class="highlighter-rouge">filtered</code>, and it finds that the two render functions use <code class="highlighter-rouge">filtered</code>. So Shiny re-executes the two render functions as well.</p>

<h1 id="11-using-uioutput-to-create-ui-elements-dynamically">11. Using uiOutput() to create UI elements dynamically</h1>

<p>One of the output functions you can add in the UI is <code class="highlighter-rouge">uiOutput()</code>. According to the naming convention (eg. <code class="highlighter-rouge">plotOutput()</code> is an output to render a plot), this is an output used to render more UI. This may sound a bit confusing, but it’s actually very useful. It’s usually used to create inputs (or any other UI) from the server, or in other words - you can create inputs dynamically.</p>

<p>Any input that you normally create in the UI is created when the app starts, and it cannot be changed. But what if one of your inputs depends on another input? In that case, you want to be able to create an input dynamically, in the server, and you would use <code class="highlighter-rouge">uiOutput()</code>.  <code class="highlighter-rouge">uiOutput()</code> can be used to create <em>any</em> UI element, but it’s most often used to create input UI elements. The same rules regarding building outputs apply, which means the output (which is a UI element in this case) is created with the function <code class="highlighter-rouge">renderUI()</code>.</p>

<h2 id="111-basic-example-of-uioutput">11.1 Basic example of uiOutput()</h2>

<p>As a very basic example, consider this app:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"num"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Maximum slider value"</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">),</span><span class="w">
  </span><span class="n">uiOutput</span><span class="p">(</span><span class="s2">"slider"</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">output</span><span class="o">$</span><span class="n">slider</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderUI</span><span class="p">({</span><span class="w">
    </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"slider"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Slider"</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w">
                </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>If you run that tiny app, you will see that whenever you change the value of the numeric input, the slider input is re-generated. This behaviour can come in handy often.</p>

<h2 id="112-use-uioutput-in-our-app-to-populate-the-countries">11.2 Use uiOutput() in our app to populate the countries</h2>

<p>We can use this concept in our app to populate the choices for the country selector. The country selector currently only holds 3 values that we manually entered, but instead we could render the country selector in the server and use the data to determine what countries it can have.</p>

<p>First we need to replace the <code class="highlighter-rouge">selectInput("countryInput", ...)</code> in the UI with</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">uiOutput</span><span class="p">(</span><span class="s2">"countryOutput"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Then we need to create the output (which will create a UI element - yeah, it can be a bit confusing at first), so add the following code to the server function:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">countryOutput</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderUI</span><span class="p">({</span><span class="w">
  </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
              </span><span class="n">sort</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">bcl</span><span class="o">$</span><span class="n">Country</span><span class="p">)),</span><span class="w">
              </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CANADA"</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Now if you run the app, you should be able to see all the countries that BC Liquor stores import from.</p>

<h2 id="113-errors-showing-up-and-quickly-disappearing">11.3 Errors showing up and quickly disappearing</h2>

<p>You might notice that when you first run the app, each of the two outputs are throwing an error message, but the error message goes away after a second. The problem is that when the app initializes, <code class="highlighter-rouge">filtered</code> is trying to access the country input, but the country input hasn’t been created yet. After Shiny finishes loading fully and the country input is generated, <code class="highlighter-rouge">filtered</code> tries accessing it again, this time it’s successful, and the error goes away.</p>

<p>Once we understand why the error is happening, fixing it is simple. Inside the <code class="highlighter-rouge">filtered</code> reactive function, we should check if the country input exists, and if not then just return <code class="highlighter-rouge">NULL</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reactive</span><span class="p">({</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nf">return</span><span class="p">(</span><span class="kc">NULL</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">    
  
  </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
           </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
           </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
           </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
    </span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>Now when the render function tries to access the data, they will get a <code class="highlighter-rouge">NULL</code> value before the app is fully loaded.  You will still get an error, because the ggplot function will not work with a <code class="highlighter-rouge">NULL</code> dataset, so we also need to make a similar check in the <code class="highlighter-rouge">renderPlot()</code> function. Only once the data is loaded, we can try to plot.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">filtered</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nf">return</span><span class="p">()</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">filtered</span><span class="p">(),</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<p>The <code class="highlighter-rouge">renderTable()</code> function doesn’t need this fix applied because Shiny doesn’t have a problem rendering a <code class="highlighter-rouge">NULL</code> table.</p>

<p><strong>Exercise:</strong> Change the product type radio buttons to get generated in the server with the values from the dataset, instead of being created in the UI with the values entered manually. If you’re feeling confident, try adding an input for “subtype” that will get re-generated every time a new type is chosen, and will be populated with all the subtype options available for the currently selected type (for example, if WINE is selected, then the subtype are white wine, red wine, etc.).</p>

<h1 id="12-final-shiny-app-code">12. Final Shiny app code</h1>

<p>In case you got lost somewhere, here is the final code. The app is now functional, but there are plenty of features you can add to make it better.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">

</span><span class="n">bcl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"bcl-data.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">titlePanel</span><span class="p">(</span><span class="s2">"BC Liquor Store prices"</span><span class="p">),</span><span class="w">
  </span><span class="n">sidebarLayout</span><span class="p">(</span><span class="w">
    </span><span class="n">sidebarPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"priceInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Price"</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span><span class="w"> </span><span class="m">40</span><span class="p">),</span><span class="w"> </span><span class="n">pre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"$"</span><span class="p">),</span><span class="w">
      </span><span class="n">radioButtons</span><span class="p">(</span><span class="s2">"typeInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Product type"</span><span class="p">,</span><span class="w">
                  </span><span class="n">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"BEER"</span><span class="p">,</span><span class="w"> </span><span class="s2">"REFRESHMENT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SPIRITS"</span><span class="p">,</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
                  </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"WINE"</span><span class="p">),</span><span class="w">
      </span><span class="n">uiOutput</span><span class="p">(</span><span class="s2">"countryOutput"</span><span class="p">)</span><span class="w">
    </span><span class="p">),</span><span class="w">
    </span><span class="n">mainPanel</span><span class="p">(</span><span class="w">
      </span><span class="n">plotOutput</span><span class="p">(</span><span class="s2">"coolplot"</span><span class="p">),</span><span class="w">
      </span><span class="n">br</span><span class="p">(),</span><span class="w"> </span><span class="n">br</span><span class="p">(),</span><span class="w">
      </span><span class="n">tableOutput</span><span class="p">(</span><span class="s2">"results"</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">output</span><span class="o">$</span><span class="n">countryOutput</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderUI</span><span class="p">({</span><span class="w">
    </span><span class="n">selectInput</span><span class="p">(</span><span class="s2">"countryInput"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
                </span><span class="n">sort</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">bcl</span><span class="o">$</span><span class="n">Country</span><span class="p">)),</span><span class="w">
                </span><span class="n">selected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"CANADA"</span><span class="p">)</span><span class="w">
  </span><span class="p">})</span><span class="w">  
  
  </span><span class="n">filtered</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reactive</span><span class="p">({</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nf">return</span><span class="p">(</span><span class="kc">NULL</span><span class="p">)</span><span class="w">
    </span><span class="p">}</span><span class="w">    
    
    </span><span class="n">bcl</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">filter</span><span class="p">(</span><span class="n">Price</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w">
             </span><span class="n">Price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">priceInput</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w">
             </span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">typeInput</span><span class="p">,</span><span class="w">
             </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">countryInput</span><span class="w">
      </span><span class="p">)</span><span class="w">
  </span><span class="p">})</span><span class="w">
  
  </span><span class="n">output</span><span class="o">$</span><span class="n">coolplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderPlot</span><span class="p">({</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.null</span><span class="p">(</span><span class="n">filtered</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nf">return</span><span class="p">()</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="n">ggplot</span><span class="p">(</span><span class="n">filtered</span><span class="p">(),</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">Alcohol_Content</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
      </span><span class="n">geom_histogram</span><span class="p">()</span><span class="w">
  </span><span class="p">})</span><span class="w">

  </span><span class="n">output</span><span class="o">$</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">renderTable</span><span class="p">({</span><span class="w">
    </span><span class="n">filtered</span><span class="p">()</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><strong>If you find this tutorial useful, please consider supporting me for the countless hours I’ve put into developing and maintaining my educational material :)</strong></p>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" style="text-align: center;">
  <input type="hidden" name="cmd" value="_s-xclick" />
  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHPwYJKoZIhvcNAQcEoIIHMDCCBywCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYCO2w1p0Js5n3PmgPvnOA25+nw6aKXMURAM51E6FoQPSTv8/GgvAuufMdWNWfWiN3BzAb8AIeSuaqrTcgqqkpHE+8H7TzyMFw+/IyDxgltfaG+EfqsUIBhJrwCrKP5Zq6JW7bg7/F2JX9HbN7xrofUhs5LSOWPbHe43cBruWn0WAjELMAkGBSsOAwIaBQAwgbwGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQI6M9xGJRQzG2AgZgNKoAfJIdAYvYqN+nS42KCztekD6e8NdKveE2tNbc7YTMide3jRoSjO3R1CrCkvKMWwLD7jg139L7IWUQt0+YtBHaK0Tbg102qUCeE67JSttvvcak6H3jPuHVzzpR5EYB5UkXUXDnjmY+LH79BcSS6lw6JcPhFRiPQcgU//82eZEo3wQNXY/7gDbXPya2XsqyX7NhK058oTaCCA4cwggODMIIC7KADAgECAgEAMA0GCSqGSIb3DQEBBQUAMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTAeFw0wNDAyMTMxMDEzMTVaFw0zNTAyMTMxMDEzMTVaMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwUdO3fxEzEtcnI7ZKZL412XvZPugoni7i7D7prCe0AtaHTc97CYgm7NsAtJyxNLixmhLV8pyIEaiHXWAh8fPKW+R017+EmXrr9EaquPmsVvTywAAE1PMNOKqo2kl4Gxiz9zZqIajOm1fZGWcGS0f5JQ2kBqNbvbg2/Za+GJ/qwUCAwEAAaOB7jCB6zAdBgNVHQ4EFgQUlp98u8ZvF71ZP1LXChvsENZklGswgbsGA1UdIwSBszCBsIAUlp98u8ZvF71ZP1LXChvsENZklGuhgZSkgZEwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAgV86VpqAWuXvX6Oro4qJ1tYVIT5DgWpE692Ag422H7yRIr/9j/iKG4Thia/Oflx4TdL+IFJBAyPK9v6zZNZtBgPBynXb048hsP16l2vi0k5Q2JKiPDsEfBhGI+HnxLXEaUWAcVfCsQFvd2A1sxRr67ip5y2wwBelUecP3AjJ+YcxggGaMIIBlgIBATCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTE1MDcwODIzMjMwNlowIwYJKoZIhvcNAQkEMRYEFBSdDHx53OKoj6VavQ+6VMaxlvCPMA0GCSqGSIb3DQEBAQUABIGAa7lEL54KAbfliC3YFuMmza6YKxRS1TgCBOr++CuGaXrnVDui5ofwz3LI9JrVJNVOPDRsna9dcjPNTkpVsW4wUZB/8+AIHXDa8Wv2XbCU0tF9yYP0zRvxMGrJKWrn8DstpaCBhm2LQADtL5bgZwkGA3vREJfLA8mzFupVstFMILw=-----END PKCS7-----
  " />
  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>

<h1 id="13-share-your-app-with-the-world">13. Share your app with the world</h1>

<p>Remember how every single app is a web page powered by an R session on a computer? So far, you’ve been running Shiny locally, which means your computer was used to power the app. It also means that the app was not accessible to anyone on the internet. If you want to share your app with the world, you need to host it somewhere.</p>

<h2 id="131-host-on-shinyappsio">13.1 Host on shinyapps.io</h2>

<p>RStudio provides a service called <a href="http://www.shinyapps.io/">shinyapps.io</a> which lets you host your apps for free. It is integrated seamlessly into RStudio so that you can publish your apps with the click of a button, and it has a free version.  The free version allows a certain number of apps per user and a certain number of activity on each app, but it should be good enough for most of you. It also lets you see some basic stats about usage of your app.</p>

<p>Hosting your app on shinyapps.io is the easy and recommended way of getting your app online.  Go to <a href="http://www.shinyapps.io/">www.shinyapps.io</a> and sign up for an account. When you’re ready to publish your app, click on the “Publish Application” button in RStudio and follow their instructions. You might be asked to install a couple packages if it’s your first time.</p>

<p><a href="../../img/blog/shiny-tutorial/shiny-publish.png"><img src="../../img/blog/shiny-tutorial/shiny-publish.png" alt="Shiny publish" /></a></p>

<p>After a successful deployment to shinyapps.io, you will be redirected to your app in the browser. You can use that URL to show off to your family what a cool app you wrote.</p>

<h2 id="132-host-on-a-shiny-server">13.2 Host on a Shiny Server</h2>

<p>The other option for hosting your app is on your own private <a href="https://www.rstudio.com/products/shiny/shiny-server/">Shiny server</a>. Shiny Server is also a product by RStudio that lets you host apps on your own server. This means that instead of RStudio hosting the app for you, you have it on your own private server. This means you have a lot more freedom and flexibility, but it also means you need to have a server and be comfortable administering a server. I currently host all my apps on <a href="https://daattali.com/shiny/">my own Shiny server</a> just because I like having the extra control, but when I first learned about Shiny I used shinyapps.io for several months.</p>

<p>If you’re feeling adventurous and want to host your own server, you can follow <a href="../../2015/05/09/setup-rstudio-shiny-server-digital-ocean/index.html">my tutorial for hosting a Shiny server</a>.</p>

<h1 id="14-more-shiny-features-to-check-out">14. More Shiny features to check out</h1>

<p>Shiny is extremely powerful and has lots of features that we haven’t covered. Here’s a sneak peek of just a few other common Shiny features that are not too advanced.</p>

<h2 id="141-shiny-in-rmarkdown">14.1 Shiny in Rmarkdown</h2>

<p>You can include Shiny inputs and outputs in an Rmarkdown document! This means that your Rmarkdown document can be interactive. Learn more <a href="http://rmarkdown.rstudio.com/authoring_shiny.html">here</a>. Here’s a simple example of how to include interactive Shiny elements in an Rmarkdown.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
output: html_document
runtime: shiny
---

```{r echo=FALSE}
sliderInput("num", "Choose a number",
            0, 100, 20)

renderPlot({
    plot(seq(input$num))
})
```
</code></pre></div></div>

<h2 id="142-use-conditionalpanel-to-conditionally-show-ui-elements">14.2 Use conditionalPanel() to conditionally show UI elements</h2>

<p>You can use <code class="highlighter-rouge">conditionalPanel()</code> to either show or hide a UI element based on a simple condition, such as the value of another input. Learn more with <code class="highlighter-rouge">?conditionalPanel</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"num"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Number"</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w">
  </span><span class="n">conditionalPanel</span><span class="p">(</span><span class="w">
    </span><span class="s2">"input.num &gt;=5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Hello!"</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="143-use-navbarpage-or-tabsetpanel-to-have-multiple-tabs-in-the-ui">14.3 Use navbarPage() or tabsetPanel() to have multiple tabs in the UI</h2>

<p>If your apps requires more than a single “view”, you can have separate tabs. Learn more with <code class="highlighter-rouge">?navbarPage</code> or <code class="highlighter-rouge">?tabsetPanel</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">tabsetPanel</span><span class="p">(</span><span class="w">
    </span><span class="n">tabPanel</span><span class="p">(</span><span class="s2">"Tab 1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Hello"</span><span class="p">),</span><span class="w">
    </span><span class="n">tabPanel</span><span class="p">(</span><span class="s2">"Tab 2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"there!"</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="144-use-dt-for-beautiful-interactive-tables">14.4 Use DT for beautiful, interactive tables</h2>

<p>Whenever you use <code class="highlighter-rouge">tableOutput()</code> + <code class="highlighter-rouge">renderTable()</code>, the table that Shiny creates is a static and boring-looking table. If you download the <code class="highlighter-rouge">DT</code> package, you can replace the default table with a much sleeker table by just using <code class="highlighter-rouge">DT::dataTableOutput()</code> + <code class="highlighter-rouge">DT::renderDataTable()</code>. It’s worth trying. Learn more on <a href="https://rstudio.github.io/DT/">DT’s website</a>.</p>

<h2 id="145-use-isolate-function-to-remove-a-dependency-on-a-reactive-variable">14.5 Use isolate() function to remove a dependency on a reactive variable</h2>

<p>When you have multiple reactive variables inside a reactive context, the whole code block will get re-executed whenever <em>any</em> of the reactive variables change because all the variables become dependencies of the code. If you want to suppress this behaviour and cause a reactive variable to not be a dependency, you can wrap the code that uses that variable inside the <code class="highlighter-rouge">isolate()</code> function.  Any reactive variables that are inside <code class="highlighter-rouge">isolate()</code> will not result in the code re-executing when their value is changed. Read more about this behaviour with <code class="highlighter-rouge">?isolate</code>.</p>

<h2 id="146-use-updateinput-functions-to-update-input-values-programmatically">14.6 Use update*Input() functions to update input values programmatically</h2>

<p>Any input function has an equivalent <code class="highlighter-rouge">update*Input</code> function that can be used to update any of its parameters.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">sliderInput</span><span class="p">(</span><span class="s2">"slider"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Move me"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w">
  </span><span class="n">numericInput</span><span class="p">(</span><span class="s2">"num"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Number"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">session</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">observe</span><span class="p">({</span><span class="w">
    </span><span class="n">updateNumericInput</span><span class="p">(</span><span class="n">session</span><span class="p">,</span><span class="w"> </span><span class="s2">"num"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="o">$</span><span class="n">slider</span><span class="p">)</span><span class="w">
  </span><span class="p">})</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Note that we used an additional argument <code class="highlighter-rouge">session</code> when defining the <code class="highlighter-rouge">server</code> function. While the <code class="highlighter-rouge">input</code> and <code class="highlighter-rouge">output</code> arguments are mandatory, the <code class="highlighter-rouge">session</code> argument is optional. You need to define the <code class="highlighter-rouge">session</code> argument when you want to use functions that need to access the session. The <code class="highlighter-rouge">session</code> parameter actually has some useful information in it, you can learn more about it with <code class="highlighter-rouge">?shiny::session</code>.</p>

<h2 id="147-scoping-rules-in-shiny-apps">14.7 Scoping rules in Shiny apps</h2>

<p>Scoping is very important to understand in Shiny once you want to support more than one user at a time. Since your app can be hosted online, multiple users can use your app simultaneously. If there are any variables (such as datasets or global parameters) that should be shared by all users, then you can safely define them globally. But any variable that should be specific to each user’s session should be not be defined globally.</p>

<p>You can think of the <code class="highlighter-rouge">server</code> function as a sandbox for each user. Any code outside of the server function is run once and is shared by all the instances of your Shiny app. Any code inside the server is run once <em>for every user that visits your app</em>. This means that any user-specific variables should be defined inside server. If you look at the code in our BC Liquor Store app, you’ll see that we followed this rule: the raw dataset was loaded outside the server and is therefore available to all users, but the <code class="highlighter-rouge">filtered</code> object is constructed inside the server so that every user has their own version of it.  If <code class="highlighter-rouge">filtered</code> was a global variable, then when one user changes the values in your app, all other users connected to your app would see the change happen.</p>

<p>You can learn more about the scoping rules in Shiny <a href="http://shiny.rstudio.com/articles/scoping.html">here</a>.</p>

<h2 id="148-use-globalr-to-define-objects-available-to-both-uir-and-serverr">14.8 Use global.R to define objects available to both ui.R and server.R</h2>

<p>If there are objects that you want to have available to both <code class="highlighter-rouge">ui.R</code> and <code class="highlighter-rouge">server.R</code>, you can place them in <code class="highlighter-rouge">global.R</code>. You can learn more about <code class="highlighter-rouge">global.R</code> and other scoping rules <a href="http://shiny.rstudio.com/articles/scoping.html">here</a>.</p>

<h2 id="149-add-images">14.9 Add images</h2>

<p>You can add an image to your Shiny app by placing an image under the “www/” folder and using the UI function <code class="highlighter-rouge">img(src = "image.png")</code>. Shiny will know to automatically look in the “www/” folder for the image.</p>

<h2 id="1410-add-javascriptcss">14.10 Add JavaScript/CSS</h2>

<p>If you know JavaScript or CSS you are more than welcome to use some in your app.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">shiny</span><span class="p">)</span><span class="w">
</span><span class="n">ui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fluidPage</span><span class="p">(</span><span class="w">
  </span><span class="n">tags</span><span class="o">$</span><span class="n">head</span><span class="p">(</span><span class="n">tags</span><span class="o">$</span><span class="n">script</span><span class="p">(</span><span class="s2">"alert('Hello!');"</span><span class="p">)),</span><span class="w">
  </span><span class="n">tags</span><span class="o">$</span><span class="n">head</span><span class="p">(</span><span class="n">tags</span><span class="o">$</span><span class="n">style</span><span class="p">(</span><span class="s2">"body{ color: blue; }"</span><span class="p">)),</span><span class="w">
  </span><span class="s2">"Hello"</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="n">server</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  
</span><span class="p">}</span><span class="w">
</span><span class="n">shinyApp</span><span class="p">(</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ui</span><span class="p">,</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>If you do want to add some JavaScript or use common JavaScript functions in your apps, you might want to check out <a href="https://github.com/daattali/shinyjs">shinyjs</a>.</p>

<h1 id="15-awesome-add-on-packages-to-shiny">15. Awesome add-on packages to Shiny</h1>

<p>Many people have written packages that enhance Shiny in some way or add extra functionality.  Here is a list of several popular packages that people often use together with Shiny:</p>

<ul>
  <li><a href="https://github.com/daattali/shinyjs">shinyjs</a>: Easily improve the user interaction and user experience in your Shiny apps in seconds</li>
  <li><a href="http://rstudio.github.io/shinythemes/">shinythemes</a>: Easily alter the appearance of your app</li>
  <li><a href="http://rstudio.github.io/leaflet/">leaflet</a>: Add interactive maps to your apps</li>
  <li><a href="http://ggvis.rstudio.com/">ggvis</a>: Similar to ggplot2, but the plots are focused on being web-based and are more interactive</li>
  <li><a href="https://rstudio.github.io/shinydashboard/">shinydashboard</a>: Gives you tools to create visual “dashboards”</li>
</ul>

<h1 id="16-resources">16. Resources</h1>

<p>Shiny is a very popular package and has lots of resources on the web. Here’s a compiled list of a few resources I recommend, which are all fairly easy to read and understand.</p>

<ul>
  <li><a href="http://shiny.rstudio.com/tutorial">Shiny official tutorial</a></li>
  <li><a href="http://shiny.rstudio.com/images/shiny-cheatsheet.pdf">Shiny cheatsheet</a></li>
  <li><a href="http://shiny.rstudio.com/articles">Lots of short useful articles about different topics in Shiny</a></li>
  <li><a href="http://rmarkdown.rstudio.com/authoring_shiny.html">Shiny in Rmarkdown</a></li>
  <li>Get help from the <a href="https://groups.google.com/forum/#!forum/shiny-discuss">Shiny Google group</a> or <a href="http://stackoverflow.com/questions/tagged/shiny">StackOverflow</a></li>
  <li><a href="http://www.shinyapps.io/">Publish your apps for free with shinyapps.io</a></li>
  <li><a href="../../2015/05/09/setup-rstudio-shiny-server-digital-ocean/index.html">Host your app on your own Shiny server</a></li>
  <li><a href="http://shiny.rstudio.com/articles/execution-scheduling.html">Learn about how reactivity works</a></li>
  <li><a href="http://shiny.rstudio.com/articles/debugging.html">Learn about useful debugging techniques</a></li>
  <li><a href="../advanced-shiny-tips/index.html">Shiny tips &amp; tricks for improving your apps and solving common problems</a></li>
</ul>

<h1 id="17-ideas-to-improve-our-app">17. Ideas to improve our app</h1>

<p>The app we developed is functional, but there are plenty of improvements that can be made. You can compare the app we developed to <a href="https://daattali.com/shiny/bcl/">my version of this app</a> to get an idea of what a (slightly) more functional app could include. Here are some suggestions of varying difficulties. Each idea also has a hint, I would recommend only reading the hint if you’re stuck for 10 minutes.</p>

<ul>
  <li>Split the app into two separate files: <code class="highlighter-rouge">ui.R</code> and <code class="highlighter-rouge">server.R</code>.
    <ul>
      <li><strong>Hint:</strong> All the code assigned into the <code class="highlighter-rouge">ui</code> variable goes into <code class="highlighter-rouge">ui.R</code> and all the code for the <code class="highlighter-rouge">server</code> function goes into <code class="highlighter-rouge">server.R</code>. You do not need to explicitly call the <code class="highlighter-rouge">shinyApp()</code> function.</li>
    </ul>
  </li>
  <li>Add an option to sort the results table by price.
    <ul>
      <li><strong>Hint:</strong> Use <code class="highlighter-rouge">checkboxInput()</code> to get TRUE/FALSE values from the user.</li>
    </ul>
  </li>
  <li>Add an image of the BC Liquor Store to the UI.
    <ul>
      <li><strong>Hint:</strong> Place the image in a folder named <code class="highlighter-rouge">www</code>, and use <code class="highlighter-rouge">img(src = "imagename.png")</code> to add the image.</li>
    </ul>
  </li>
  <li>Share your app with everyone on the internet by deploying to shinyapps.io.
    <ul>
      <li><strong>Hint:</strong> Go to <a href="http://www.shinyapps.io/">shinyapps.io</a>, register for an account, then click the “Publish App” button in RStudio.</li>
    </ul>
  </li>
  <li>Use the <code class="highlighter-rouge">DT</code> package to turn the current results table into an interactive table.
    <ul>
      <li><strong>Hint:</strong> Install the <code class="highlighter-rouge">DT</code> package, replace <code class="highlighter-rouge">tableOutput()</code> with <code class="highlighter-rouge">DT::dataTableOutput()</code> and replace <code class="highlighter-rouge">renderTable()</code> with <code class="highlighter-rouge">DT::renderDataTable()</code>.</li>
    </ul>
  </li>
  <li>Add parameters to the plot.
    <ul>
      <li><strong>Hint:</strong> You will need to add input functions that will be used as parameters for the plot. You could use <code class="highlighter-rouge">shinyjs::colourInput()</code> to let the user decide on the colours of the bars in the plot.</li>
    </ul>
  </li>
  <li>The app currently behaves strangely when the user selects filters that return 0 results. For example, try searching for wines from Belgium. There will be an empty plot and empty table generated, and there will be a warning message in the R console. Try to figure out why this warning message is appearing, and how to fix it.
    <ul>
      <li><strong>Hint:</strong> The problem happens because <code class="highlighter-rouge">renderPlot()</code> and <code class="highlighter-rouge">renderTable()</code> are trying to render an empty dataframe. To fix this issue, the <code class="highlighter-rouge">filtered</code> reactive expression should check for the number of rows in the filtered data, and if that number is 0 then return <code class="highlighter-rouge">NULL</code> instead of a 0-row dataframe.</li>
    </ul>
  </li>
  <li>Place the plot and the table in separate tabs.
    <ul>
      <li><strong>Hint:</strong> Use <code class="highlighter-rouge">tabsetPanel()</code> to create an interface with multiple tabs.</li>
    </ul>
  </li>
  <li>If you know CSS, add CSS to make your app look nicer.
    <ul>
      <li><strong>Hint:</strong> Add a CSS file under <code class="highlighter-rouge">www</code> and use the function <code class="highlighter-rouge">includeCSS()</code> to use it in your app.</li>
    </ul>
  </li>
  <li>Experiment with packages that add extra features to Shiny, such as <code class="highlighter-rouge">shinyjs</code>, <code class="highlighter-rouge">leaflet</code>, <code class="highlighter-rouge">shinydashboard</code>, <code class="highlighter-rouge">shinythemes</code>, <code class="highlighter-rouge">ggvis</code>.
    <ul>
      <li><strong>Hint:</strong> Each package is unique and has a different purpose, so you need to read the documentation of each package in order to know what it provides and how to use it.</li>
    </ul>
  </li>
  <li>Show the number of results found whenever the filters change. For example, when searching for Italian wines $20-$40, the app would show the text “We found 122 options for you”.
    <ul>
      <li><strong>Hint:</strong> Add a <code class="highlighter-rouge">textOutput()</code> to the UI, and in its corresponding <code class="highlighter-rouge">renderText()</code> use the number of rows in the <code class="highlighter-rouge">filtered()</code> object.</li>
    </ul>
  </li>
  <li>Allow the user to download the results table as a .csv file.
    <ul>
      <li><strong>Hint:</strong> Look into the <code class="highlighter-rouge">downloadButton()</code> and <code class="highlighter-rouge">downloadHandler()</code> functions.</li>
    </ul>
  </li>
  <li>When the user wants to see only wines, show a new input that allows the user to filter by sweetness level. Only show this input if wines are selected.
    <ul>
      <li><strong>Hint:</strong> Create a new input function for the sweetness level, and use it in the server code that filters the data. Use <code class="highlighter-rouge">conditionalPanel()</code> to conditionally show this new input. The <code class="highlighter-rouge">condition</code> argument of <code class="highlighter-rouge">conditionalPanel</code> should be something like <code class="highlighter-rouge">input.typeInput == "WINE"</code>.</li>
    </ul>
  </li>
  <li>Allow the user to search for multiple alcohol types simultaneously, instead of being able to choose only wines/beers/etc.
    <ul>
      <li><strong>Hint:</strong> There are two approaches to do this. Either change the <code class="highlighter-rouge">typeInput</code> radio buttons into checkboxes (<code class="highlighter-rouge">checkboxGroupInput()</code>) since checkboxes support choosing multiple items, or change <code class="highlighter-rouge">typeInput</code> into a select box (<code class="highlighter-rouge">selectInput()</code>) with the argument <code class="highlighter-rouge">multiple = TRUE</code> to support choosing multiple options.</li>
    </ul>
  </li>
  <li>If you look at the dataset, you’ll see that each product has a “type” (beer, wine, spirit, or refreshment) and also a “subtype” (red wine, rum, cider, etc.). Add an input for “subtype” that will let the user filter for only a specific subtype of products. Since each type has different subtype options, the choices for subtype should get re-generated every time a new type is chosen. For example, if “wine” is selected, then the subtypes available should be white wine, red wine, etc.
    <ul>
      <li><strong>Hint:</strong> Use <code class="highlighter-rouge">uiOutput()</code> to create this input in the server code.</li>
    </ul>
  </li>
  <li>Provide a way for the user to show results from <em>all</em> countries (instead of forcing a filter by only one specific country).
    <ul>
      <li><strong>Hint:</strong> There are two ways to approach this. You can either add a value of “All” to the dropdown list of country options, you can include a checkbox for “Filter by country” and only show the dropdown</li>
    </ul>
  </li>
</ul>

      </article>
      
      
        <div class="blog-tags">
          Tags:
          
            
              <a href="../../tags/index.html#professional">professional</a>
            
              <a href="../../tags/index.html#rstats">rstats</a>
            
              <a href="../../tags/index.html#r-bloggers">r-bloggers</a>
            
              <a href="../../tags/index.html#shiny">shiny</a>
            
              <a href="../../tags/index.html#tutorial">tutorial</a>
            
              <a href="../../tags/index.html#popular">popular</a>
            
          
        </div>
      

      
  <div class="share-section">
    <h1 class="share-title">Liked what you read?</h1>
    
    
      <div class="share-buttons">
        
        
        
        
    
        
        
        
        
        <a href="../../contact/index.html" data-ga-event=1 data-ga-category="share" data-ga-action="message" data-ga-label="/blog/building-shiny-apps-tutorial/">
          Let me know
        </a>
        <!--
        <a href="https://www.facebook.com/dialog/feed?app_id=536330676521989&link=https://deanattali.com/blog/building-shiny-apps-tutorial/&name=Building Shiny apps - an interactive tutorial&caption=deanattali.com&redirect_uri=https://deanattali.com/blog/building-shiny-apps-tutorial/?message=Thanks for sharing!&picture=https://deanattali.com/img/blog/shiny-tutorial/shiny-addplot.png" data-ga-event=1 data-ga-category="share" data-ga-action="facebook" data-ga-label="/blog/building-shiny-apps-tutorial/">
          Share on Facebook
        </a>
        -->
        <a href="https://www.paypal.me/daattali/10" data-ga-event=1 data-ga-category="share" data-ga-action="donate" data-ga-label="/blog/building-shiny-apps-tutorial/">
          Support me
        </a>
        <a href="https://twitter.com/intent/tweet?url=https://deanattali.com/blog/building-shiny-apps-tutorial/&amp;via=daattali&amp;hashtags=rstats&amp;text=Building%20Shiny%20apps%20-%20an%20interactive%20tutorial" data-ga-event=1 data-ga-category="share" data-ga-action="twitter" data-ga-label="/blog/building-shiny-apps-tutorial/">
          Tweet it
        </a>
      </div>
    
    
    
      <!-- MailChimp Signup Form -->
      <div id="mailchimp-subscribe-section-share" class="mailchimp-subscribe-section">
        <div id="mc_embed_signup-share">
          <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-share" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-share">
      	      <label for="mce-EMAIL-share">Sign up to my Shiny newsletter</label>
              <div class="container">
                <div class="row">
                  <div class="col-sm-8 col-xs-12">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-share" placeholder="Email" required="">
                  </div>
                  <div class="col-sm-4 col-xs-12">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-share" class="button">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
            </div>
          </form>
        </div>
      </div>
     

  </div>


      
      

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="../shiny-persistent-data-storage/index.html" data-toggle="tooltip" data-placement="top" title="Persistent data storage in Shiny apps">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="../ezknitr-package/index.html" data-toggle="tooltip" data-placement="top" title="ezknitr: R package to avoid the typical working directory pain when using knitr">Next Post &rarr;</a>
          </li>
        
      </ul>
      
      
        <div class="disqus-comments">
          
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'deanattali-site';
	    // ensure that pages with query string or anchor get the same discussion
            var url_parts = window.location.href.split("?");
            url_parts = url_parts[0].split("#");
            disqus_url = url_parts[0];
            disqus_url = disqus_url.replace(/(\/)*$/, "/"); // make sure the URL ends with one slash
            disqus_url = disqus_url.replace(/https:\/\//, "http:\/\/"); // make sure new https pages use same comments as old http site
            
            // Jekyll 3 caused so many bugs, I'm tired of fixing them one by one properly, so I'll just hack it...
            // https://github.com/jekyll/jekyll/issues/4483
            // The projects page now has a trailing slash, it didn't used to
            if (disqus_url.substr(-9) == "projects/index.html") {
            	disqus_url = disqus_url.substr(0, disqus_url.length - 1);
            }

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


        </div>
      
      
      <div id="scroll-box">
  <div id="scroll-box-close">&times;</div>
  <div id="scroll-box-hire">
    Need Shiny help?
    <a href="../../shiny/index.html">Hire me!</a>
  </div>
  <div id="mailchimp-subscribe-section-scrollbox" class="mailchimp-subscribe-section">
    <div id="mc_embed_signup-scrollbox">
      <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-scrollbox" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
        <div id="mc_embed_signup_scroll-scrollbox">
  	      <label for="mce-EMAIL-scrollbox">Sign up to my Shiny newsletter</label>
          <div class="container">
            <div class="row">
              <div class="col-sm-8 col-xs-12">
  	            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-scrollbox" placeholder="Email" required="">
              </div>
              <div class="col-sm-4 col-xs-12">
                <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-scrollbox" class="button" title="Sign up to my Shiny newsletter">
              </div>
            </div>
          </div>
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
        </div>
      </form>
    </div>
  </div>
  <div id="scroll-box-contact">
    Questions/comments?
    <a href="../../contact/index.html">Contact me!</a>
  </div>
</div>

    </div>
  </div>
</div>


    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">

          
          <li>
            <a href="../../cdn-cgi/l/email-protection.html#aecacbcfc0eecfdadacfc2c7dacbcdc680cdc1c391dddbccc4cbcdda93e6cbc2c2c18ec8dcc1c38ecacbcfc0cfdadacfc2c780cdc1c3" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://calendly.com/attalitech/meeting" target="_blank" title="Schedule a meeting with me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-calendar-check-o fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/daattali" title="Twitter">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/daattali" title="GitHub">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://www.facebook.com/daattali" title="Facebook">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          
          <li>
            <a href="https://stackoverflow.com/users/3943160/daattali" title="StackOverflow">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          

          

        

          

        </ul>

        <p class="copyright text-muted">
          &copy; Dean Attali
          &nbsp;&bull;&nbsp;
          2018

          
          &nbsp;&bull;&nbsp;
          <a href="../../cdn-cgi/l/email-protection.html#d4b0b1b5ba94b5a0a0b5b8bda0b1b7bcfab7bbb9eba7a1b6beb1b7a0e99cb1b8b8bbf4b2a6bbb9f4b0b1b5bab5a0a0b5b8bdfab7bbb9"><span class="__cf_email__" data-cfemail="0e6a6b6f604e6f7a7a6f62677a6b6d66206d6163">[email&#160;protected]</span></a>
          
        </p>
        
        <div style="text-align: center; margin: 10px 0 -10px; font-weight: bold;" class="text-muted">
          <!-- Considering purchasing RStudio Connect, Shiny Server Pro, shinyapps.io, or any other RStudio product? Feel free to contact me to discuss. -->
          Want to improve your Shiny skills? Try my new interactive, online video course <a href="https://www.datacamp.com/courses/building-web-applications-in-r-with-shiny-case-studies">Shiny Case Studies</a>
        </div>

        <div id="mailchimp-subscribe-section-footer" class="mailchimp-subscribe-section">
        <div id="mc_embed_signup-footer">
          <form action="http://deanattali.us14.list-manage.com/subscribe/post?u=a579a88c8f09f9b8502b9d0c3&amp;id=c180f5773c" method="post" id="mc-embedded-subscribe-form-footer" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <div id="mc_embed_signup_scroll-footer">
              <div class="container">
                <div class="row">
                  <div class="col-sm-8 col-xs-12">
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL-footer" placeholder="Email" required="">
                  </div>
                  <div class="col-sm-4 col-xs-12">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe-footer" class="button">
                  </div>
                </div>
              </div>
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a579a88c8f09f9b8502b9d0c3_c180f5773c" tabindex="-1" value=""></div>
            </div>
          </form>
        </div>
        </div>

        <p class="theme-by text-muted">
          Theme by
          <a href="../../beautiful-jekyll/index.html">beautiful-jekyll</a>
        </p>
      </div>
    </div>
  </div>
</footer>

    
    


  
	<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="../../js/jquery-1.11.2.min.js"></script>
  
	<script src="../../js/bootstrap.min.js"></script>
  
	<script src="../../js/js.cookie.js"></script>
  
	<script src="../../js/main.js"></script>
  







	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-59820529-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->



     
      <!-- AddThis plugin (floating social media sharing buttons on the left of each post) -->
      <script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-57d65a4d97789dd1"></script>
    
    
  </body>

<!-- Mirrored from deanattali.com/blog/building-shiny-apps-tutorial/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Nov 2018 02:20:16 GMT -->
</html>
